<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!--NewPage-->
<HTML>
<HEAD>
<!-- Generated by javadoc (build 1.6.0_13) on Thu May 06 06:21:08 GMT 2010 -->
<TITLE>
AdaptiveRevisitHostQueue (Heritrix 1.14.4)
</TITLE>

<META NAME="date" CONTENT="2010-05-06">

<LINK REL ="stylesheet" TYPE="text/css" HREF="../../../../stylesheet.css" TITLE="Style">

<SCRIPT type="text/javascript">
function windowTitle()
{
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="AdaptiveRevisitHostQueue (Heritrix 1.14.4)";
    }
}
</SCRIPT>
<NOSCRIPT>
</NOSCRIPT>

</HEAD>

<BODY BGCOLOR="white" onload="windowTitle();">
<HR>


<!-- ========= START OF TOP NAVBAR ======= -->
<A NAME="navbar_top"><!-- --></A>
<A HREF="#skip-navbar_top" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_top_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="class-use/AdaptiveRevisitHostQueue.html"><FONT CLASS="NavBarFont1"><B>Use</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../index-all.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;<A HREF="../../../../org/archive/crawler/frontier/AdaptiveRevisitFrontier.html" title="class in org.archive.crawler.frontier"><B>PREV CLASS</B></A>&nbsp;
&nbsp;<A HREF="../../../../org/archive/crawler/frontier/AdaptiveRevisitQueueList.html" title="class in org.archive.crawler.frontier"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../../index.html?org/archive/crawler/frontier/AdaptiveRevisitHostQueue.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="AdaptiveRevisitHostQueue.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>


</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY:&nbsp;NESTED&nbsp;|&nbsp;<A HREF="#field_summary">FIELD</A>&nbsp;|&nbsp;<A HREF="#constructor_summary">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;<A HREF="#field_detail">FIELD</A>&nbsp;|&nbsp;<A HREF="#constructor_detail">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_top"></A>
<!-- ========= END OF TOP NAVBAR ========= -->

<HR>
<!-- ======== START OF CLASS DATA ======== -->
<H2>
<FONT SIZE="-1">
org.archive.crawler.frontier</FONT>
<BR>
Class AdaptiveRevisitHostQueue</H2>
<PRE>
java.lang.Object
  <IMG SRC="../../../../resources/inherit.gif" ALT="extended by "><B>org.archive.crawler.frontier.AdaptiveRevisitHostQueue</B>
</PRE>
<DL>
<DT><B>All Implemented Interfaces:</B> <DD><A HREF="../../../../org/archive/crawler/datamodel/CoreAttributeConstants.html" title="interface in org.archive.crawler.datamodel">CoreAttributeConstants</A>, <A HREF="../../../../org/archive/crawler/datamodel/CrawlSubstats.HasCrawlSubstats.html" title="interface in org.archive.crawler.datamodel">CrawlSubstats.HasCrawlSubstats</A>, <A HREF="../../../../org/archive/crawler/framework/Frontier.FrontierGroup.html" title="interface in org.archive.crawler.framework">Frontier.FrontierGroup</A>, <A HREF="../../../../org/archive/crawler/frontier/AdaptiveRevisitAttributeConstants.html" title="interface in org.archive.crawler.frontier">AdaptiveRevisitAttributeConstants</A></DD>
</DL>
<HR>
<DL>
<DT><PRE>public class <B>AdaptiveRevisitHostQueue</B><DT>extends java.lang.Object<DT>implements <A HREF="../../../../org/archive/crawler/frontier/AdaptiveRevisitAttributeConstants.html" title="interface in org.archive.crawler.frontier">AdaptiveRevisitAttributeConstants</A>, <A HREF="../../../../org/archive/crawler/framework/Frontier.FrontierGroup.html" title="interface in org.archive.crawler.framework">Frontier.FrontierGroup</A></DL>
</PRE>

<P>
A priority based queue of CrawlURIs. Each queue should represent
 one host (although this is not enforced in this class). Items are ordered
 by the scheduling directive and time of next processing (in that order) 
 and also indexed by the URI.
 <p>
 The HQ does no calculations on the 'time of next processing.' It always 
 relies on values already set on the CrawlURI.
 <p>
 Note: Class is not 'thread safe.' In multi threaded environment the caller
 must ensure that two threads do not make overlapping calls.
 <p>
 Any BDB DatabaseException will be converted to an IOException by public 
 methods. This includes preserving the original stacktrace, in favor of the
 one created for the IOException, so that the true source of the exception
 is not lost.
<P>

<P>
<DL>
<DT><B>Author:</B></DT>
  <DD>Kristinn Sigurdsson</DD>
</DL>
<HR>

<P>
<!-- =========== FIELD SUMMARY =========== -->

<A NAME="field_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Field Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;com.sleepycat.bind.serial.StoredClassCatalog</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/archive/crawler/frontier/AdaptiveRevisitHostQueue.html#classCatalog">classCatalog</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;For BDB serialization of objects</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;com.sleepycat.bind.EntryBinding</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/archive/crawler/frontier/AdaptiveRevisitHostQueue.html#crawlURIBinding">crawlURIBinding</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;A binding for the CrawlURIARWrapper object</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>(package private) &nbsp;java.lang.String</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/archive/crawler/frontier/AdaptiveRevisitHostQueue.html#hostName">hostName</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Name of the host that this AdaptiveRevisitHostQueue represents</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>static&nbsp;int</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/archive/crawler/frontier/AdaptiveRevisitHostQueue.html#HQSTATE_BUSY">HQSTATE_BUSY</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;HQ has maximum number of CrawlURI currently being processed.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>static&nbsp;int</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/archive/crawler/frontier/AdaptiveRevisitHostQueue.html#HQSTATE_EMPTY">HQSTATE_EMPTY</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;HQ contains no queued CrawlURIs elements.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>static&nbsp;int</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/archive/crawler/frontier/AdaptiveRevisitHostQueue.html#HQSTATE_READY">HQSTATE_READY</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;HQ has a CrawlURI ready for processing</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>static&nbsp;int</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/archive/crawler/frontier/AdaptiveRevisitHostQueue.html#HQSTATE_SNOOZED">HQSTATE_SNOOZED</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;HQ is in a suspended state until it can be woken back up</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>(package private) &nbsp;long</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/archive/crawler/frontier/AdaptiveRevisitHostQueue.html#inProcessing">inProcessing</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Number of URIs belonging to this queue that are being processed at the
  moment.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>(package private) &nbsp;long</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/archive/crawler/frontier/AdaptiveRevisitHostQueue.html#nextReadyTime">nextReadyTime</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Time (in milliseconds) when the HQ will next be ready to issue a URI
  for processing.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;com.sleepycat.bind.EntryBinding</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/archive/crawler/frontier/AdaptiveRevisitHostQueue.html#primaryKeyBinding">primaryKeyBinding</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;A binding for the serialization of the primary key (URI string)</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;com.sleepycat.je.Database</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/archive/crawler/frontier/AdaptiveRevisitHostQueue.html#primaryUriDB">primaryUriDB</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Database containing the URI priority queue, indexed by the the 
 URI string.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;com.sleepycat.je.Database</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/archive/crawler/frontier/AdaptiveRevisitHostQueue.html#processingUriDB">processingUriDB</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;A database containing those URIs that are currently being processed.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;com.sleepycat.je.SecondaryDatabase</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/archive/crawler/frontier/AdaptiveRevisitHostQueue.html#secondaryUriDB">secondaryUriDB</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Secondary index into <A HREF="../../../../org/archive/crawler/frontier/AdaptiveRevisitHostQueue.html#primaryUriDB"><CODE>the primary DB</CODE></A>, URIs indexed
  by the time when they can next be processed again.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>(package private) &nbsp;long</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/archive/crawler/frontier/AdaptiveRevisitHostQueue.html#size">size</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Size of queue.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>(package private) &nbsp;int</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/archive/crawler/frontier/AdaptiveRevisitHostQueue.html#state">state</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Last known state of HQ -- ALL methods should use getState() to read
  this value, never read it directly.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;<A HREF="../../../../org/archive/crawler/datamodel/CrawlSubstats.html" title="class in org.archive.crawler.datamodel">CrawlSubstats</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/archive/crawler/frontier/AdaptiveRevisitHostQueue.html#substats">substats</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>(package private) &nbsp;int</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/archive/crawler/frontier/AdaptiveRevisitHostQueue.html#valence">valence</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Number of simultanious connections permitted to this host.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>(package private) &nbsp;long[]</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/archive/crawler/frontier/AdaptiveRevisitHostQueue.html#wakeUpTime">wakeUpTime</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Time (in milliseconds) when each URI 'slot' becomes available again.</TD>
</TR>
</TABLE>
&nbsp;<A NAME="fields_inherited_from_class_org.archive.crawler.frontier.AdaptiveRevisitAttributeConstants"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#EEEEFF" CLASS="TableSubHeadingColor">
<TH ALIGN="left"><B>Fields inherited from interface org.archive.crawler.frontier.<A HREF="../../../../org/archive/crawler/frontier/AdaptiveRevisitAttributeConstants.html" title="interface in org.archive.crawler.frontier">AdaptiveRevisitAttributeConstants</A></B></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE><A HREF="../../../../org/archive/crawler/frontier/AdaptiveRevisitAttributeConstants.html#A_CONTENT_STATE_KEY">A_CONTENT_STATE_KEY</A>, <A HREF="../../../../org/archive/crawler/frontier/AdaptiveRevisitAttributeConstants.html#A_DISCARD_REVISIT">A_DISCARD_REVISIT</A>, <A HREF="../../../../org/archive/crawler/frontier/AdaptiveRevisitAttributeConstants.html#A_FETCH_OVERDUE">A_FETCH_OVERDUE</A>, <A HREF="../../../../org/archive/crawler/frontier/AdaptiveRevisitAttributeConstants.html#A_LAST_CONTENT_DIGEST">A_LAST_CONTENT_DIGEST</A>, <A HREF="../../../../org/archive/crawler/frontier/AdaptiveRevisitAttributeConstants.html#A_LAST_DATESTAMP">A_LAST_DATESTAMP</A>, <A HREF="../../../../org/archive/crawler/frontier/AdaptiveRevisitAttributeConstants.html#A_LAST_ETAG">A_LAST_ETAG</A>, <A HREF="../../../../org/archive/crawler/frontier/AdaptiveRevisitAttributeConstants.html#A_NUMBER_OF_VERSIONS">A_NUMBER_OF_VERSIONS</A>, <A HREF="../../../../org/archive/crawler/frontier/AdaptiveRevisitAttributeConstants.html#A_NUMBER_OF_VISITS">A_NUMBER_OF_VISITS</A>, <A HREF="../../../../org/archive/crawler/frontier/AdaptiveRevisitAttributeConstants.html#A_TIME_OF_NEXT_PROCESSING">A_TIME_OF_NEXT_PROCESSING</A>, <A HREF="../../../../org/archive/crawler/frontier/AdaptiveRevisitAttributeConstants.html#A_WAIT_INTERVAL">A_WAIT_INTERVAL</A>, <A HREF="../../../../org/archive/crawler/frontier/AdaptiveRevisitAttributeConstants.html#A_WAIT_REEVALUATED">A_WAIT_REEVALUATED</A>, <A HREF="../../../../org/archive/crawler/frontier/AdaptiveRevisitAttributeConstants.html#CONTENT_CHANGED">CONTENT_CHANGED</A>, <A HREF="../../../../org/archive/crawler/frontier/AdaptiveRevisitAttributeConstants.html#CONTENT_UNCHANGED">CONTENT_UNCHANGED</A>, <A HREF="../../../../org/archive/crawler/frontier/AdaptiveRevisitAttributeConstants.html#CONTENT_UNKNOWN">CONTENT_UNKNOWN</A></CODE></TD>
</TR>
</TABLE>
&nbsp;<A NAME="fields_inherited_from_class_org.archive.crawler.datamodel.CoreAttributeConstants"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#EEEEFF" CLASS="TableSubHeadingColor">
<TH ALIGN="left"><B>Fields inherited from interface org.archive.crawler.datamodel.<A HREF="../../../../org/archive/crawler/datamodel/CoreAttributeConstants.html" title="interface in org.archive.crawler.datamodel">CoreAttributeConstants</A></B></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE><A HREF="../../../../org/archive/crawler/datamodel/CoreAttributeConstants.html#A_ANNOTATIONS">A_ANNOTATIONS</A>, <A HREF="../../../../org/archive/crawler/datamodel/CoreAttributeConstants.html#A_CONTENT_DIGEST">A_CONTENT_DIGEST</A>, <A HREF="../../../../org/archive/crawler/datamodel/CoreAttributeConstants.html#A_CONTENT_TYPE">A_CONTENT_TYPE</A>, <A HREF="../../../../org/archive/crawler/datamodel/CoreAttributeConstants.html#A_CREDENTIAL_AVATARS_KEY">A_CREDENTIAL_AVATARS_KEY</A>, <A HREF="../../../../org/archive/crawler/datamodel/CoreAttributeConstants.html#A_DELAY_FACTOR">A_DELAY_FACTOR</A>, <A HREF="../../../../org/archive/crawler/datamodel/CoreAttributeConstants.html#A_DISTANCE_FROM_SEED">A_DISTANCE_FROM_SEED</A>, <A HREF="../../../../org/archive/crawler/datamodel/CoreAttributeConstants.html#A_DNS_FETCH_TIME">A_DNS_FETCH_TIME</A>, <A HREF="../../../../org/archive/crawler/datamodel/CoreAttributeConstants.html#A_DNS_SERVER_IP_LABEL">A_DNS_SERVER_IP_LABEL</A>, <A HREF="../../../../org/archive/crawler/datamodel/CoreAttributeConstants.html#A_ETAG_HEADER">A_ETAG_HEADER</A>, <A HREF="../../../../org/archive/crawler/datamodel/CoreAttributeConstants.html#A_FETCH_BEGAN_TIME">A_FETCH_BEGAN_TIME</A>, <A HREF="../../../../org/archive/crawler/datamodel/CoreAttributeConstants.html#A_FETCH_COMPLETED_TIME">A_FETCH_COMPLETED_TIME</A>, <A HREF="../../../../org/archive/crawler/datamodel/CoreAttributeConstants.html#A_FETCH_HISTORY">A_FETCH_HISTORY</A>, <A HREF="../../../../org/archive/crawler/datamodel/CoreAttributeConstants.html#A_FORCE_RETIRE">A_FORCE_RETIRE</A>, <A HREF="../../../../org/archive/crawler/datamodel/CoreAttributeConstants.html#A_FTP_CONTROL_CONVERSATION">A_FTP_CONTROL_CONVERSATION</A>, <A HREF="../../../../org/archive/crawler/datamodel/CoreAttributeConstants.html#A_FTP_FETCH_STATUS">A_FTP_FETCH_STATUS</A>, <A HREF="../../../../org/archive/crawler/datamodel/CoreAttributeConstants.html#A_HERITABLE_KEYS">A_HERITABLE_KEYS</A>, <A HREF="../../../../org/archive/crawler/datamodel/CoreAttributeConstants.html#A_HTML_BASE">A_HTML_BASE</A>, <A HREF="../../../../org/archive/crawler/datamodel/CoreAttributeConstants.html#A_HTTP_BIND_ADDRESS">A_HTTP_BIND_ADDRESS</A>, <A HREF="../../../../org/archive/crawler/datamodel/CoreAttributeConstants.html#A_HTTP_PROXY_HOST">A_HTTP_PROXY_HOST</A>, <A HREF="../../../../org/archive/crawler/datamodel/CoreAttributeConstants.html#A_HTTP_PROXY_PORT">A_HTTP_PROXY_PORT</A>, <A HREF="../../../../org/archive/crawler/datamodel/CoreAttributeConstants.html#A_HTTP_TRANSACTION">A_HTTP_TRANSACTION</A>, <A HREF="../../../../org/archive/crawler/datamodel/CoreAttributeConstants.html#A_LAST_MODIFIED_HEADER">A_LAST_MODIFIED_HEADER</A>, <A HREF="../../../../org/archive/crawler/datamodel/CoreAttributeConstants.html#A_LOCALIZED_ERRORS">A_LOCALIZED_ERRORS</A>, <A HREF="../../../../org/archive/crawler/datamodel/CoreAttributeConstants.html#A_META_ROBOTS">A_META_ROBOTS</A>, <A HREF="../../../../org/archive/crawler/datamodel/CoreAttributeConstants.html#A_MINIMUM_DELAY">A_MINIMUM_DELAY</A>, <A HREF="../../../../org/archive/crawler/datamodel/CoreAttributeConstants.html#A_MIRROR_PATH">A_MIRROR_PATH</A>, <A HREF="../../../../org/archive/crawler/datamodel/CoreAttributeConstants.html#A_PREREQUISITE_URI">A_PREREQUISITE_URI</A>, <A HREF="../../../../org/archive/crawler/datamodel/CoreAttributeConstants.html#A_REFERENCE_LENGTH">A_REFERENCE_LENGTH</A>, <A HREF="../../../../org/archive/crawler/datamodel/CoreAttributeConstants.html#A_RETRY_DELAY">A_RETRY_DELAY</A>, <A HREF="../../../../org/archive/crawler/datamodel/CoreAttributeConstants.html#A_RRECORD_SET_LABEL">A_RRECORD_SET_LABEL</A>, <A HREF="../../../../org/archive/crawler/datamodel/CoreAttributeConstants.html#A_RUNTIME_EXCEPTION">A_RUNTIME_EXCEPTION</A>, <A HREF="../../../../org/archive/crawler/datamodel/CoreAttributeConstants.html#A_SOURCE_TAG">A_SOURCE_TAG</A>, <A HREF="../../../../org/archive/crawler/datamodel/CoreAttributeConstants.html#A_STATUS">A_STATUS</A>, <A HREF="../../../../org/archive/crawler/datamodel/CoreAttributeConstants.html#HEADER_TRUNC">HEADER_TRUNC</A>, <A HREF="../../../../org/archive/crawler/datamodel/CoreAttributeConstants.html#LENGTH_TRUNC">LENGTH_TRUNC</A>, <A HREF="../../../../org/archive/crawler/datamodel/CoreAttributeConstants.html#TIMER_TRUNC">TIMER_TRUNC</A>, <A HREF="../../../../org/archive/crawler/datamodel/CoreAttributeConstants.html#TRUNC_SUFFIX">TRUNC_SUFFIX</A></CODE></TD>
</TR>
</TABLE>
&nbsp;
<!-- ======== CONSTRUCTOR SUMMARY ======== -->

<A NAME="constructor_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Constructor Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE><B><A HREF="../../../../org/archive/crawler/frontier/AdaptiveRevisitHostQueue.html#AdaptiveRevisitHostQueue(java.lang.String, com.sleepycat.je.Environment, com.sleepycat.bind.serial.StoredClassCatalog, int)">AdaptiveRevisitHostQueue</A></B>(java.lang.String&nbsp;hostName,
                         com.sleepycat.je.Environment&nbsp;env,
                         com.sleepycat.bind.serial.StoredClassCatalog&nbsp;catalog,
                         int&nbsp;valence)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Constructor</TD>
</TR>
</TABLE>
&nbsp;
<!-- ========== METHOD SUMMARY =========== -->

<A NAME="method_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Method Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/archive/crawler/frontier/AdaptiveRevisitHostQueue.html#add(org.archive.crawler.datamodel.CrawlURI, boolean)">add</A></B>(<A HREF="../../../../org/archive/crawler/datamodel/CrawlURI.html" title="class in org.archive.crawler.datamodel">CrawlURI</A>&nbsp;curi,
    boolean&nbsp;overrideSetTimeOnDups)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Add a CrawlURI to this host queue.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/archive/crawler/frontier/AdaptiveRevisitHostQueue.html#addInProcessing(org.archive.crawler.datamodel.CrawlURI)">addInProcessing</A></B>(<A HREF="../../../../org/archive/crawler/datamodel/CrawlURI.html" title="class in org.archive.crawler.datamodel">CrawlURI</A>&nbsp;curi)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Adds a CrawlURI to the list of CrawlURIs belonging to this HQ and are
 being processed at the moment.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/archive/crawler/frontier/AdaptiveRevisitHostQueue.html#close()">close</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Cleanup all open Berkeley Database objects.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;long</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/archive/crawler/frontier/AdaptiveRevisitHostQueue.html#countCrawlURIs()">countCrawlURIs</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Count all entries in both primaryUriDB and processingUriDB.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/archive/crawler/frontier/AdaptiveRevisitHostQueue.html#deleteInProcessing(java.lang.String)">deleteInProcessing</A></B>(java.lang.String&nbsp;uri)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Removes a URI from the list of URIs belonging to this HQ and are 
 currently being processed.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/archive/crawler/frontier/AdaptiveRevisitHostQueue.html#flushProcessingURIs()">flushProcessingURIs</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Flush any CrawlURIs in the processingUriDB into the primaryUriDB.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;<A HREF="../../../../org/archive/crawler/datamodel/CrawlURI.html" title="class in org.archive.crawler.datamodel">CrawlURI</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/archive/crawler/frontier/AdaptiveRevisitHostQueue.html#getCrawlURI(java.lang.String)">getCrawlURI</A></B>(java.lang.String&nbsp;uri)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns the CrawlURI associated with the specified URI (string) or null
 if no such CrawlURI is queued in this HQ.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;java.lang.String</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/archive/crawler/frontier/AdaptiveRevisitHostQueue.html#getHostName()">getHostName</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns the HQ's name</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;long</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/archive/crawler/frontier/AdaptiveRevisitHostQueue.html#getNextReadyTime()">getNextReadyTime</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns the time when the HQ will next be ready to issue a URI.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;long</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/archive/crawler/frontier/AdaptiveRevisitHostQueue.html#getSize()">getSize</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns the size of the HQ.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;int</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/archive/crawler/frontier/AdaptiveRevisitHostQueue.html#getState()">getState</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns the current state of the HQ.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;java.lang.String</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/archive/crawler/frontier/AdaptiveRevisitHostQueue.html#getStateByName()">getStateByName</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Same as <A HREF="../../../../org/archive/crawler/frontier/AdaptiveRevisitHostQueue.html#getState()"><CODE>getState()</CODE></A> except this method returns a 
 human readable name for the state instead of its constant integer value.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<A HREF="../../../../org/archive/crawler/datamodel/CrawlSubstats.html" title="class in org.archive.crawler.datamodel">CrawlSubstats</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/archive/crawler/frontier/AdaptiveRevisitHostQueue.html#getSubstats()">getSubstats</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;boolean</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/archive/crawler/frontier/AdaptiveRevisitHostQueue.html#inProcessing(java.lang.String)">inProcessing</A></B>(java.lang.String&nbsp;uri)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns true if this HQ has a CrawlURI matching the uri string currently
 being processed.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<A HREF="../../../../org/archive/crawler/datamodel/CrawlURI.html" title="class in org.archive.crawler.datamodel">CrawlURI</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/archive/crawler/frontier/AdaptiveRevisitHostQueue.html#next()">next</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns the 'top' URI in the AdaptiveRevisitHostQueue.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<A HREF="../../../../org/archive/crawler/datamodel/CrawlURI.html" title="class in org.archive.crawler.datamodel">CrawlURI</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/archive/crawler/frontier/AdaptiveRevisitHostQueue.html#peek()">peek</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns the URI with the earliest time of next processing.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/archive/crawler/frontier/AdaptiveRevisitHostQueue.html#reorder()">reorder</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Method is called whenever something has been done that might have
 changed the value of the 'published' time of next ready.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;java.lang.String</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/archive/crawler/frontier/AdaptiveRevisitHostQueue.html#report(int)">report</A></B>(int&nbsp;max)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns a report detailing the status of this HQ.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/archive/crawler/frontier/AdaptiveRevisitHostQueue.html#setNextReadyTime(long)">setNextReadyTime</A></B>(long&nbsp;newTime)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Updates nextReadyTime (if smaller) with the supplied value</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/archive/crawler/frontier/AdaptiveRevisitHostQueue.html#setOwner(org.archive.crawler.frontier.AdaptiveRevisitQueueList)">setOwner</A></B>(<A HREF="../../../../org/archive/crawler/frontier/AdaptiveRevisitQueueList.html" title="class in org.archive.crawler.frontier">AdaptiveRevisitQueueList</A>&nbsp;owner)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Set the AdaptiveRevisitQueueList object that contains this HQ.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;com.sleepycat.je.OperationStatus</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/archive/crawler/frontier/AdaptiveRevisitHostQueue.html#strictAdd(org.archive.crawler.datamodel.CrawlURI, boolean)">strictAdd</A></B>(<A HREF="../../../../org/archive/crawler/datamodel/CrawlURI.html" title="class in org.archive.crawler.datamodel">CrawlURI</A>&nbsp;curi,
          boolean&nbsp;overrideDuplicates)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;An internal method for adding URIs to the queue.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/archive/crawler/frontier/AdaptiveRevisitHostQueue.html#update(org.archive.crawler.datamodel.CrawlURI, boolean, long)">update</A></B>(<A HREF="../../../../org/archive/crawler/datamodel/CrawlURI.html" title="class in org.archive.crawler.datamodel">CrawlURI</A>&nbsp;curi,
       boolean&nbsp;needWait,
       long&nbsp;wakeupTime)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Update CrawlURI that has completed processing.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/archive/crawler/frontier/AdaptiveRevisitHostQueue.html#update(org.archive.crawler.datamodel.CrawlURI, boolean, long, boolean)">update</A></B>(<A HREF="../../../../org/archive/crawler/datamodel/CrawlURI.html" title="class in org.archive.crawler.datamodel">CrawlURI</A>&nbsp;curi,
       boolean&nbsp;needWait,
       long&nbsp;wakeupTime,
       boolean&nbsp;forgetURI)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Update CrawlURI that has completed processing.</TD>
</TR>
</TABLE>
&nbsp;<A NAME="methods_inherited_from_class_java.lang.Object"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#EEEEFF" CLASS="TableSubHeadingColor">
<TH ALIGN="left"><B>Methods inherited from class java.lang.Object</B></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</CODE></TD>
</TR>
</TABLE>
&nbsp;
<P>

<!-- ============ FIELD DETAIL =========== -->

<A NAME="field_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="1"><FONT SIZE="+2">
<B>Field Detail</B></FONT></TH>
</TR>
</TABLE>

<A NAME="HQSTATE_EMPTY"><!-- --></A><H3>
HQSTATE_EMPTY</H3>
<PRE>
public static final int <B>HQSTATE_EMPTY</B></PRE>
<DL>
<DD>HQ contains no queued CrawlURIs elements. This state only occurs after 
  queue creation before the first add. After the first item is added the 
  state can never become empty again.
<P>
<DL>
<DT><B>See Also:</B><DD><A HREF="../../../../constant-values.html#org.archive.crawler.frontier.AdaptiveRevisitHostQueue.HQSTATE_EMPTY">Constant Field Values</A></DL>
</DL>
<HR>

<A NAME="HQSTATE_READY"><!-- --></A><H3>
HQSTATE_READY</H3>
<PRE>
public static final int <B>HQSTATE_READY</B></PRE>
<DL>
<DD>HQ has a CrawlURI ready for processing
<P>
<DL>
<DT><B>See Also:</B><DD><A HREF="../../../../constant-values.html#org.archive.crawler.frontier.AdaptiveRevisitHostQueue.HQSTATE_READY">Constant Field Values</A></DL>
</DL>
<HR>

<A NAME="HQSTATE_BUSY"><!-- --></A><H3>
HQSTATE_BUSY</H3>
<PRE>
public static final int <B>HQSTATE_BUSY</B></PRE>
<DL>
<DD>HQ has maximum number of CrawlURI currently being processed. This number
  is either equal to the 'valence' (maximum number of simultanious 
  connections to a host) or (if smaller) the total number of CrawlURIs 
  in the HQ.
<P>
<DL>
<DT><B>See Also:</B><DD><A HREF="../../../../constant-values.html#org.archive.crawler.frontier.AdaptiveRevisitHostQueue.HQSTATE_BUSY">Constant Field Values</A></DL>
</DL>
<HR>

<A NAME="HQSTATE_SNOOZED"><!-- --></A><H3>
HQSTATE_SNOOZED</H3>
<PRE>
public static final int <B>HQSTATE_SNOOZED</B></PRE>
<DL>
<DD>HQ is in a suspended state until it can be woken back up
<P>
<DL>
<DT><B>See Also:</B><DD><A HREF="../../../../constant-values.html#org.archive.crawler.frontier.AdaptiveRevisitHostQueue.HQSTATE_SNOOZED">Constant Field Values</A></DL>
</DL>
<HR>

<A NAME="hostName"><!-- --></A><H3>
hostName</H3>
<PRE>
final java.lang.String <B>hostName</B></PRE>
<DL>
<DD>Name of the host that this AdaptiveRevisitHostQueue represents
<P>
<DL>
</DL>
</DL>
<HR>

<A NAME="state"><!-- --></A><H3>
state</H3>
<PRE>
int <B>state</B></PRE>
<DL>
<DD>Last known state of HQ -- ALL methods should use getState() to read
  this value, never read it directly.
<P>
<DL>
</DL>
</DL>
<HR>

<A NAME="nextReadyTime"><!-- --></A><H3>
nextReadyTime</H3>
<PRE>
long <B>nextReadyTime</B></PRE>
<DL>
<DD>Time (in milliseconds) when the HQ will next be ready to issue a URI
  for processing. When setting this value, methods should use the 
  setter method <A HREF="../../../../org/archive/crawler/frontier/AdaptiveRevisitHostQueue.html#setNextReadyTime(long)"><CODE>setNextReadyTime()</CODE></A>
<P>
<DL>
</DL>
</DL>
<HR>

<A NAME="wakeUpTime"><!-- --></A><H3>
wakeUpTime</H3>
<PRE>
long[] <B>wakeUpTime</B></PRE>
<DL>
<DD>Time (in milliseconds) when each URI 'slot' becomes available again.<p>
  Any positive value larger then the current time signifies a taken slot 
  where the URI has completed processing but the politness wait has not
  ended. <p>
  A zero or positive value smaller then the current time in milliseconds
  signifies an empty slot.<p> 
  Any negative value signifies a slot for a URI that is being processed.
  <p>
  Methods should never write directly to this, rather use the 
  <A HREF="../../../../org/archive/crawler/frontier/AdaptiveRevisitHostQueue.html#updateWakeUpTimeSlot(long)"><CODE>updateWakeUpTimeSlot()</CODE></A> and
  <A HREF="../../../../org/archive/crawler/frontier/AdaptiveRevisitHostQueue.html#useWakeUpTimeSlot()"><CODE>useWakeUpTimeSlot()</CODE></A> methods as needed.
<P>
<DL>
</DL>
</DL>
<HR>

<A NAME="valence"><!-- --></A><H3>
valence</H3>
<PRE>
int <B>valence</B></PRE>
<DL>
<DD>Number of simultanious connections permitted to this host. I.e. this 
  many URIs can be issued before state of HQ becomes busy until one of 
  them is returned via the update method.
<P>
<DL>
</DL>
</DL>
<HR>

<A NAME="size"><!-- --></A><H3>
size</H3>
<PRE>
long <B>size</B></PRE>
<DL>
<DD>Size of queue. That is, the number of CrawlURIs that have been added to
 it, including any that are currently being processed.
<P>
<DL>
</DL>
</DL>
<HR>

<A NAME="inProcessing"><!-- --></A><H3>
inProcessing</H3>
<PRE>
long <B>inProcessing</B></PRE>
<DL>
<DD>Number of URIs belonging to this queue that are being processed at the
  moment. This number will always be in the range of 0 - valence
<P>
<DL>
</DL>
</DL>
<HR>

<A NAME="substats"><!-- --></A><H3>
substats</H3>
<PRE>
protected <A HREF="../../../../org/archive/crawler/datamodel/CrawlSubstats.html" title="class in org.archive.crawler.datamodel">CrawlSubstats</A> <B>substats</B></PRE>
<DL>
<DL>
</DL>
</DL>
<HR>

<A NAME="primaryUriDB"><!-- --></A><H3>
primaryUriDB</H3>
<PRE>
protected com.sleepycat.je.Database <B>primaryUriDB</B></PRE>
<DL>
<DD>Database containing the URI priority queue, indexed by the the 
 URI string.
<P>
<DL>
</DL>
</DL>
<HR>

<A NAME="secondaryUriDB"><!-- --></A><H3>
secondaryUriDB</H3>
<PRE>
protected com.sleepycat.je.SecondaryDatabase <B>secondaryUriDB</B></PRE>
<DL>
<DD>Secondary index into <A HREF="../../../../org/archive/crawler/frontier/AdaptiveRevisitHostQueue.html#primaryUriDB"><CODE>the primary DB</CODE></A>, URIs indexed
  by the time when they can next be processed again.
<P>
<DL>
</DL>
</DL>
<HR>

<A NAME="processingUriDB"><!-- --></A><H3>
processingUriDB</H3>
<PRE>
protected com.sleepycat.je.Database <B>processingUriDB</B></PRE>
<DL>
<DD>A database containing those URIs that are currently being processed.
<P>
<DL>
</DL>
</DL>
<HR>

<A NAME="classCatalog"><!-- --></A><H3>
classCatalog</H3>
<PRE>
protected com.sleepycat.bind.serial.StoredClassCatalog <B>classCatalog</B></PRE>
<DL>
<DD>For BDB serialization of objects
<P>
<DL>
</DL>
</DL>
<HR>

<A NAME="primaryKeyBinding"><!-- --></A><H3>
primaryKeyBinding</H3>
<PRE>
protected com.sleepycat.bind.EntryBinding <B>primaryKeyBinding</B></PRE>
<DL>
<DD>A binding for the serialization of the primary key (URI string)
<P>
<DL>
</DL>
</DL>
<HR>

<A NAME="crawlURIBinding"><!-- --></A><H3>
crawlURIBinding</H3>
<PRE>
protected com.sleepycat.bind.EntryBinding <B>crawlURIBinding</B></PRE>
<DL>
<DD>A binding for the CrawlURIARWrapper object
<P>
<DL>
</DL>
</DL>

<!-- ========= CONSTRUCTOR DETAIL ======== -->

<A NAME="constructor_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="1"><FONT SIZE="+2">
<B>Constructor Detail</B></FONT></TH>
</TR>
</TABLE>

<A NAME="AdaptiveRevisitHostQueue(java.lang.String, com.sleepycat.je.Environment, com.sleepycat.bind.serial.StoredClassCatalog, int)"><!-- --></A><H3>
AdaptiveRevisitHostQueue</H3>
<PRE>
public <B>AdaptiveRevisitHostQueue</B>(java.lang.String&nbsp;hostName,
                                com.sleepycat.je.Environment&nbsp;env,
                                com.sleepycat.bind.serial.StoredClassCatalog&nbsp;catalog,
                                int&nbsp;valence)
                         throws java.io.IOException</PRE>
<DL>
<DD>Constructor
<P>
<DL>
<DT><B>Parameters:</B><DD><CODE>hostName</CODE> - Name of the host this queue represents. This name must
                 be unique for all HQs in the same Environment.<DD><CODE>env</CODE> - Berkeley DB Environment. All BDB databases created will use 
            it.<DD><CODE>catalog</CODE> - Db for bdb class serialization.<DD><CODE>valence</CODE> - The total number of simultanous URIs that the HQ can issue
                for processing. Once this many URIs have been issued for
                processing, the HQ will go into <A HREF="../../../../org/archive/crawler/frontier/AdaptiveRevisitHostQueue.html#HQSTATE_BUSY"><CODE>busy</CODE></A>
                state until at least one of the URI is 
                <A HREF="../../../../org/archive/crawler/frontier/AdaptiveRevisitHostQueue.html#update(org.archive.crawler.datamodel.CrawlURI, boolean, long)"><CODE>updated</CODE></A>.
                Value should be larger then zero. Zero and negative values
                will be treated same as 1.
<DT><B>Throws:</B>
<DD><CODE>java.io.IOException</CODE> - if an error occurs opening/creating the 
         database</DL>
</DL>

<!-- ============ METHOD DETAIL ========== -->

<A NAME="method_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="1"><FONT SIZE="+2">
<B>Method Detail</B></FONT></TH>
</TR>
</TABLE>

<A NAME="getHostName()"><!-- --></A><H3>
getHostName</H3>
<PRE>
public java.lang.String <B>getHostName</B>()</PRE>
<DL>
<DD>Returns the HQ's name
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>

<DT><B>Returns:</B><DD>the HQ's name</DL>
</DD>
</DL>
<HR>

<A NAME="add(org.archive.crawler.datamodel.CrawlURI, boolean)"><!-- --></A><H3>
add</H3>
<PRE>
public void <B>add</B>(<A HREF="../../../../org/archive/crawler/datamodel/CrawlURI.html" title="class in org.archive.crawler.datamodel">CrawlURI</A>&nbsp;curi,
                boolean&nbsp;overrideSetTimeOnDups)
         throws java.io.IOException</PRE>
<DL>
<DD>Add a CrawlURI to this host queue.
 <p>
 Calls can optionally chose to have the time of next processing value 
 override existing values for the URI if the existing values are 'later'
 then the new ones.
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>curi</CODE> - The CrawlURI to add.<DD><CODE>overrideSetTimeOnDups</CODE> - If true then the time of next processing for
                           the supplied URI will override the any
                           existing time for it already stored in the HQ.
                           If false, then no changes will be made to any
                           existing values of the URI. Note: Will never
                           override with a later time.
<DT><B>Throws:</B>
<DD><CODE>java.io.IOException</CODE> - When an error occurs accessing the database</DL>
</DD>
</DL>
<HR>

<A NAME="strictAdd(org.archive.crawler.datamodel.CrawlURI, boolean)"><!-- --></A><H3>
strictAdd</H3>
<PRE>
protected com.sleepycat.je.OperationStatus <B>strictAdd</B>(<A HREF="../../../../org/archive/crawler/datamodel/CrawlURI.html" title="class in org.archive.crawler.datamodel">CrawlURI</A>&nbsp;curi,
                                                     boolean&nbsp;overrideDuplicates)
                                              throws com.sleepycat.je.DatabaseException</PRE>
<DL>
<DD>An internal method for adding URIs to the queue.
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>curi</CODE> - The CrawlURI to add<DD><CODE>overrideDuplicates</CODE> - If true then any existing CrawlURI in the DB
                           will be overwritten. If false insert into the
                           queue is only performed if the key doesn't 
                           already exist.
<DT><B>Returns:</B><DD>The OperationStatus object returned by the put method.
<DT><B>Throws:</B>
<DD><CODE>com.sleepycat.je.DatabaseException</CODE></DL>
</DD>
</DL>
<HR>

<A NAME="flushProcessingURIs()"><!-- --></A><H3>
flushProcessingURIs</H3>
<PRE>
protected void <B>flushProcessingURIs</B>()
                            throws com.sleepycat.je.DatabaseException</PRE>
<DL>
<DD>Flush any CrawlURIs in the processingUriDB into the primaryUriDB. URIs
 flushed will have their 'time of next fetch' maintained and the 
 nextReadyTime will be updated if needed.
 <p>
 No change is made to the list of available slots.
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>

<DT><B>Throws:</B>
<DD><CODE>com.sleepycat.je.DatabaseException</CODE> - if one occurs while flushing</DL>
</DD>
</DL>
<HR>

<A NAME="countCrawlURIs()"><!-- --></A><H3>
countCrawlURIs</H3>
<PRE>
protected long <B>countCrawlURIs</B>()
                       throws com.sleepycat.je.DatabaseException</PRE>
<DL>
<DD>Count all entries in both primaryUriDB and processingUriDB.
 <p>
 This method is needed since BDB does not provide a simple way of counting
 entries.
 <p>
 Note: This is an expensive operation, requires a loop through the entire
 queue!
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>

<DT><B>Returns:</B><DD>the number of distinct CrawlURIs in the HQ.
<DT><B>Throws:</B>
<DD><CODE>com.sleepycat.je.DatabaseException</CODE></DL>
</DD>
</DL>
<HR>

<A NAME="inProcessing(java.lang.String)"><!-- --></A><H3>
inProcessing</H3>
<PRE>
protected boolean <B>inProcessing</B>(java.lang.String&nbsp;uri)
                        throws com.sleepycat.je.DatabaseException</PRE>
<DL>
<DD>Returns true if this HQ has a CrawlURI matching the uri string currently
 being processed. False otherwise.
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>uri</CODE> - Uri to check
<DT><B>Returns:</B><DD>true if this HQ has a CrawlURI matching the uri string currently
 being processed. False otherwise.
<DT><B>Throws:</B>
<DD><CODE>com.sleepycat.je.DatabaseException</CODE></DL>
</DD>
</DL>
<HR>

<A NAME="deleteInProcessing(java.lang.String)"><!-- --></A><H3>
deleteInProcessing</H3>
<PRE>
protected void <B>deleteInProcessing</B>(java.lang.String&nbsp;uri)
                           throws com.sleepycat.je.DatabaseException</PRE>
<DL>
<DD>Removes a URI from the list of URIs belonging to this HQ and are 
 currently being processed.
 <p>
 Returns true if successful, false if the URI was not found.
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>uri</CODE> - The URI string of the CrawlURI to delete.
<DT><B>Throws:</B>
<DD><CODE>com.sleepycat.je.DatabaseException</CODE>
<DD><CODE>java.lang.IllegalStateException</CODE> - if the URI was not on the list</DL>
</DD>
</DL>
<HR>

<A NAME="addInProcessing(org.archive.crawler.datamodel.CrawlURI)"><!-- --></A><H3>
addInProcessing</H3>
<PRE>
protected void <B>addInProcessing</B>(<A HREF="../../../../org/archive/crawler/datamodel/CrawlURI.html" title="class in org.archive.crawler.datamodel">CrawlURI</A>&nbsp;curi)
                        throws com.sleepycat.je.DatabaseException,
                               java.lang.IllegalStateException</PRE>
<DL>
<DD>Adds a CrawlURI to the list of CrawlURIs belonging to this HQ and are
 being processed at the moment.
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>curi</CODE> - The CrawlURI to add to the list
<DT><B>Throws:</B>
<DD><CODE>com.sleepycat.je.DatabaseException</CODE>
<DD><CODE>java.lang.IllegalStateException</CODE> - if the CrawlURI is already in the list of URIs being
             processed.</DL>
</DD>
</DL>
<HR>

<A NAME="getCrawlURI(java.lang.String)"><!-- --></A><H3>
getCrawlURI</H3>
<PRE>
protected <A HREF="../../../../org/archive/crawler/datamodel/CrawlURI.html" title="class in org.archive.crawler.datamodel">CrawlURI</A> <B>getCrawlURI</B>(java.lang.String&nbsp;uri)
                        throws com.sleepycat.je.DatabaseException</PRE>
<DL>
<DD>Returns the CrawlURI associated with the specified URI (string) or null
 if no such CrawlURI is queued in this HQ. If CrawlURI is being processed
 it is not considered to be <i>queued </i> and this method will return
 null for any such URIs.
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>uri</CODE> - A string representing the URI
<DT><B>Returns:</B><DD>the CrawlURI associated with the specified URI (string) or null
         if no such CrawlURI is queued in this HQ.
<DT><B>Throws:</B>
<DD><CODE>com.sleepycat.je.DatabaseException</CODE> - if a errors occurs reading the database</DL>
</DD>
</DL>
<HR>

<A NAME="update(org.archive.crawler.datamodel.CrawlURI, boolean, long)"><!-- --></A><H3>
update</H3>
<PRE>
public void <B>update</B>(<A HREF="../../../../org/archive/crawler/datamodel/CrawlURI.html" title="class in org.archive.crawler.datamodel">CrawlURI</A>&nbsp;curi,
                   boolean&nbsp;needWait,
                   long&nbsp;wakeupTime)
            throws java.lang.IllegalStateException,
                   java.io.IOException</PRE>
<DL>
<DD>Update CrawlURI that has completed processing.
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>curi</CODE> - The CrawlURI. This must be a CrawlURI issued by this HQ's 
             <A HREF="../../../../org/archive/crawler/frontier/AdaptiveRevisitHostQueue.html#next()"><CODE>next()</CODE></A> method.<DD><CODE>needWait</CODE> - If true then the URI was processed successfully, 
                 requiring a period of suspended action on that host. If
                 valence is > 1 then seperate times are maintained for 
                 each slot.<DD><CODE>wakeupTime</CODE> - If new state is 
                   <A HREF="../../../../org/archive/crawler/frontier/AdaptiveRevisitHostQueue.html#HQSTATE_SNOOZED"><CODE>snoozed</CODE></A>
                   then this parameter should contain the time (in 
                   milliseconds) when it will be safe to wake the HQ up
                   again. Otherwise this parameter will be ignored.
<DT><B>Throws:</B>
<DD><CODE>java.lang.IllegalStateException</CODE> - if the CrawlURI
         does not match a CrawlURI issued for crawling by this HQ's
         <A HREF="../../../../org/archive/crawler/frontier/AdaptiveRevisitHostQueue.html#next()"><CODE>next()</CODE></A>.
<DD><CODE>java.io.IOException</CODE> - if an error occurs accessing the database</DL>
</DD>
</DL>
<HR>

<A NAME="update(org.archive.crawler.datamodel.CrawlURI, boolean, long, boolean)"><!-- --></A><H3>
update</H3>
<PRE>
public void <B>update</B>(<A HREF="../../../../org/archive/crawler/datamodel/CrawlURI.html" title="class in org.archive.crawler.datamodel">CrawlURI</A>&nbsp;curi,
                   boolean&nbsp;needWait,
                   long&nbsp;wakeupTime,
                   boolean&nbsp;forgetURI)
            throws java.lang.IllegalStateException,
                   java.io.IOException</PRE>
<DL>
<DD>Update CrawlURI that has completed processing.
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>curi</CODE> - The CrawlURI. This must be a CrawlURI issued by this HQ's 
             <A HREF="../../../../org/archive/crawler/frontier/AdaptiveRevisitHostQueue.html#next()"><CODE>next()</CODE></A> method.<DD><CODE>needWait</CODE> - If true then the URI was processed successfully, 
                 requiring a period of suspended action on that host. If
                 valence is > 1 then seperate times are maintained for 
                 each slot.<DD><CODE>wakeupTime</CODE> - If new state is 
                   <A HREF="../../../../org/archive/crawler/frontier/AdaptiveRevisitHostQueue.html#HQSTATE_SNOOZED"><CODE>snoozed</CODE></A>
                   then this parameter should contain the time (in 
                   milliseconds) when it will be safe to wake the HQ up
                   again. Otherwise this parameter will be ignored.<DD><CODE>forgetURI</CODE> - If true, the URI will be deleted from the queue.
<DT><B>Throws:</B>
<DD><CODE>java.lang.IllegalStateException</CODE> - if the CrawlURI
         does not match a CrawlURI issued for crawling by this HQ's
         <A HREF="../../../../org/archive/crawler/frontier/AdaptiveRevisitHostQueue.html#next()"><CODE>next()</CODE></A>.
<DD><CODE>java.io.IOException</CODE> - if an error occurs accessing the database</DL>
</DD>
</DL>
<HR>

<A NAME="next()"><!-- --></A><H3>
next</H3>
<PRE>
public <A HREF="../../../../org/archive/crawler/datamodel/CrawlURI.html" title="class in org.archive.crawler.datamodel">CrawlURI</A> <B>next</B>()
              throws java.lang.IllegalStateException,
                     java.io.IOException</PRE>
<DL>
<DD>Returns the 'top' URI in the AdaptiveRevisitHostQueue. 
 <p>
 HQ state will be set to <A HREF="../../../../org/archive/crawler/frontier/AdaptiveRevisitHostQueue.html#HQSTATE_BUSY"><CODE>busy</CODE></A> if this 
 method returns normally.
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>

<DT><B>Returns:</B><DD>a CrawlURI ready for processing
<DT><B>Throws:</B>
<DD><CODE>java.lang.IllegalStateException</CODE> - if the HostQueues current state is not
         ready <A HREF="../../../../org/archive/crawler/frontier/AdaptiveRevisitHostQueue.html#HQSTATE_READY"><CODE>ready</CODE></A>
<DD><CODE>java.io.IOException</CODE> - if an error occurs reading from the database</DL>
</DD>
</DL>
<HR>

<A NAME="peek()"><!-- --></A><H3>
peek</H3>
<PRE>
public <A HREF="../../../../org/archive/crawler/datamodel/CrawlURI.html" title="class in org.archive.crawler.datamodel">CrawlURI</A> <B>peek</B>()
              throws java.lang.IllegalStateException,
                     java.io.IOException</PRE>
<DL>
<DD>Returns the URI with the earliest time of next processing. I.e. the URI
 at the head of this host based priority queue.
 <p>
 Note: This method will return the head CrawlURI regardless of wether it 
 is safe to start processing it or not. CrawlURI will remain in the queue.
 The returned CrawlURI should only be used for queue inspection, it can 
 <i>not</i> be updated and returned to the queue. To get URIs ready for
 processing use <A HREF="../../../../org/archive/crawler/frontier/AdaptiveRevisitHostQueue.html#next()"><CODE>next()</CODE></A>.
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>

<DT><B>Returns:</B><DD>the URI with the earliest time of next processing or null if 
         the queue is empty or all URIs are currently being processed.
<DT><B>Throws:</B>
<DD><CODE>java.lang.IllegalStateException</CODE>
<DD><CODE>java.io.IOException</CODE> - if an error occurs reading from the database</DL>
</DD>
</DL>
<HR>

<A NAME="getState()"><!-- --></A><H3>
getState</H3>
<PRE>
public int <B>getState</B>()</PRE>
<DL>
<DD>Returns the current state of the HQ.
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>

<DT><B>Returns:</B><DD>the current state of the HQ.<DT><B>See Also:</B><DD><A HREF="../../../../org/archive/crawler/frontier/AdaptiveRevisitHostQueue.html#HQSTATE_BUSY"><CODE>HQSTATE_BUSY</CODE></A>, 
<A HREF="../../../../org/archive/crawler/frontier/AdaptiveRevisitHostQueue.html#HQSTATE_EMPTY"><CODE>HQSTATE_EMPTY</CODE></A>, 
<A HREF="../../../../org/archive/crawler/frontier/AdaptiveRevisitHostQueue.html#HQSTATE_READY"><CODE>HQSTATE_READY</CODE></A>, 
<A HREF="../../../../org/archive/crawler/frontier/AdaptiveRevisitHostQueue.html#HQSTATE_SNOOZED"><CODE>HQSTATE_SNOOZED</CODE></A></DL>
</DD>
</DL>
<HR>

<A NAME="getNextReadyTime()"><!-- --></A><H3>
getNextReadyTime</H3>
<PRE>
public long <B>getNextReadyTime</B>()</PRE>
<DL>
<DD>Returns the time when the HQ will next be ready to issue a URI. 
 <p>
 If the queue is in a <A HREF="../../../../org/archive/crawler/frontier/AdaptiveRevisitHostQueue.html#HQSTATE_SNOOZED"><CODE>snoozed</CODE></A> state then this 
 time will be in the future and reflects either the time when the HQ will
 again be able to issue URIs for processing because politness constraints
 have ended, or when a URI next becomes available for visit, whichever is
 larger.
 <p>
 If the queue is in a <A HREF="../../../../org/archive/crawler/frontier/AdaptiveRevisitHostQueue.html#HQSTATE_READY"><CODE>ready</CODE></A> state this time will
 be in the past and reflect the earliest time when the HQ had a URI ready
 for processing, taking time spent snoozed for politness concerns into
 account. 
 <p>
 If the HQ is in any other state then the return value of this method is
 equal to Long.MAX_VALUE.
 <p>
 This value may change each time a URI is added, issued or updated.
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>

<DT><B>Returns:</B><DD>the time when the HQ will next be ready to issue a URI</DL>
</DD>
</DL>
<HR>

<A NAME="setNextReadyTime(long)"><!-- --></A><H3>
setNextReadyTime</H3>
<PRE>
protected void <B>setNextReadyTime</B>(long&nbsp;newTime)</PRE>
<DL>
<DD>Updates nextReadyTime (if smaller) with the supplied value
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>newTime</CODE> - the new value of nextReady Time;</DL>
</DD>
</DL>
<HR>

<A NAME="reorder()"><!-- --></A><H3>
reorder</H3>
<PRE>
protected void <B>reorder</B>()</PRE>
<DL>
<DD>Method is called whenever something has been done that might have
 changed the value of the 'published' time of next ready. If an owner 
 has been specified it will be notified that the value may have changed..
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="getStateByName()"><!-- --></A><H3>
getStateByName</H3>
<PRE>
public java.lang.String <B>getStateByName</B>()</PRE>
<DL>
<DD>Same as <A HREF="../../../../org/archive/crawler/frontier/AdaptiveRevisitHostQueue.html#getState()"><CODE>getState()</CODE></A> except this method returns a 
 human readable name for the state instead of its constant integer value.
 <p>
 Should only be used for reports, error messages and other strings 
 intended for human eyes.
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>

<DT><B>Returns:</B><DD>the human readable name of the current state</DL>
</DD>
</DL>
<HR>

<A NAME="getSize()"><!-- --></A><H3>
getSize</H3>
<PRE>
public long <B>getSize</B>()</PRE>
<DL>
<DD>Returns the size of the HQ. That is, the number of URIs queued, 
 including any that are currently being processed.
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>

<DT><B>Returns:</B><DD>the size of the HQ.</DL>
</DD>
</DL>
<HR>

<A NAME="setOwner(org.archive.crawler.frontier.AdaptiveRevisitQueueList)"><!-- --></A><H3>
setOwner</H3>
<PRE>
public void <B>setOwner</B>(<A HREF="../../../../org/archive/crawler/frontier/AdaptiveRevisitQueueList.html" title="class in org.archive.crawler.frontier">AdaptiveRevisitQueueList</A>&nbsp;owner)</PRE>
<DL>
<DD>Set the AdaptiveRevisitQueueList object that contains this HQ. Will cause
 that
 object to be notified (via 
 <A HREF="../../../../org/archive/crawler/frontier/AdaptiveRevisitQueueList.html#reorder(org.archive.crawler.frontier.AdaptiveRevisitHostQueue)"><CODE>reorder()</CODE></A> when the
 value used for sorting the list of HQs changes.
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>owner</CODE> - the ARHostQueueList object that contains this HQ.</DL>
</DD>
</DL>
<HR>

<A NAME="close()"><!-- --></A><H3>
close</H3>
<PRE>
public void <B>close</B>()
           throws java.io.IOException</PRE>
<DL>
<DD>Cleanup all open Berkeley Database objects.
 <p>
 Does <I>not</I> close the Environment.
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>

<DT><B>Throws:</B>
<DD><CODE>java.io.IOException</CODE> - if an error occurs closing a database object</DL>
</DD>
</DL>
<HR>

<A NAME="report(int)"><!-- --></A><H3>
report</H3>
<PRE>
public java.lang.String <B>report</B>(int&nbsp;max)</PRE>
<DL>
<DD>Returns a report detailing the status of this HQ.
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>max</CODE> - Maximum number of URIs to show. 0 equals no limit.
<DT><B>Returns:</B><DD>a report detailing the status of this HQ.</DL>
</DD>
</DL>
<HR>

<A NAME="getSubstats()"><!-- --></A><H3>
getSubstats</H3>
<PRE>
public <A HREF="../../../../org/archive/crawler/datamodel/CrawlSubstats.html" title="class in org.archive.crawler.datamodel">CrawlSubstats</A> <B>getSubstats</B>()</PRE>
<DL>
<DD><DL>
<DT><B>Specified by:</B><DD><CODE><A HREF="../../../../org/archive/crawler/datamodel/CrawlSubstats.HasCrawlSubstats.html#getSubstats()">getSubstats</A></CODE> in interface <CODE><A HREF="../../../../org/archive/crawler/datamodel/CrawlSubstats.HasCrawlSubstats.html" title="interface in org.archive.crawler.datamodel">CrawlSubstats.HasCrawlSubstats</A></CODE></DL>
</DD>
<DD><DL>
</DL>
</DD>
</DL>
<!-- ========= END OF CLASS DATA ========= -->
<HR>


<!-- ======= START OF BOTTOM NAVBAR ====== -->
<A NAME="navbar_bottom"><!-- --></A>
<A HREF="#skip-navbar_bottom" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_bottom_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="class-use/AdaptiveRevisitHostQueue.html"><FONT CLASS="NavBarFont1"><B>Use</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../index-all.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;<A HREF="../../../../org/archive/crawler/frontier/AdaptiveRevisitFrontier.html" title="class in org.archive.crawler.frontier"><B>PREV CLASS</B></A>&nbsp;
&nbsp;<A HREF="../../../../org/archive/crawler/frontier/AdaptiveRevisitQueueList.html" title="class in org.archive.crawler.frontier"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../../index.html?org/archive/crawler/frontier/AdaptiveRevisitHostQueue.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="AdaptiveRevisitHostQueue.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>


</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY:&nbsp;NESTED&nbsp;|&nbsp;<A HREF="#field_summary">FIELD</A>&nbsp;|&nbsp;<A HREF="#constructor_summary">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;<A HREF="#field_detail">FIELD</A>&nbsp;|&nbsp;<A HREF="#constructor_detail">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_bottom"></A>
<!-- ======== END OF BOTTOM NAVBAR ======= -->

<HR>
Copyright &copy; 2003-2010 Internet Archive. All Rights Reserved.
</BODY>
</HTML>

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!--NewPage-->
<HTML>
<HEAD>
<!-- Generated by javadoc (build 1.6.0_13) on Thu May 06 06:21:02 GMT 2010 -->
<TITLE>
CachedBdbMap (Heritrix 1.14.4)
</TITLE>

<META NAME="date" CONTENT="2010-05-06">

<LINK REL ="stylesheet" TYPE="text/css" HREF="../../../stylesheet.css" TITLE="Style">

<SCRIPT type="text/javascript">
function windowTitle()
{
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="CachedBdbMap (Heritrix 1.14.4)";
    }
}
</SCRIPT>
<NOSCRIPT>
</NOSCRIPT>

</HEAD>

<BODY BGCOLOR="white" onload="windowTitle();">
<HR>


<!-- ========= START OF TOP NAVBAR ======= -->
<A NAME="navbar_top"><!-- --></A>
<A HREF="#skip-navbar_top" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_top_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="class-use/CachedBdbMap.html"><FONT CLASS="NavBarFont1"><B>Use</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../index-all.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;<A HREF="../../../org/archive/util/BloomFilter64bit.html" title="class in org.archive.util"><B>PREV CLASS</B></A>&nbsp;
&nbsp;<A HREF="../../../org/archive/util/CachedBdbMap.DbEnvironmentEntry.html" title="class in org.archive.util"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../index.html?org/archive/util/CachedBdbMap.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="CachedBdbMap.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>


</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY:&nbsp;<A HREF="#nested_class_summary">NESTED</A>&nbsp;|&nbsp;<A HREF="#field_summary">FIELD</A>&nbsp;|&nbsp;<A HREF="#constructor_summary">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;<A HREF="#field_detail">FIELD</A>&nbsp;|&nbsp;<A HREF="#constructor_detail">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_top"></A>
<!-- ========= END OF TOP NAVBAR ========= -->

<HR>
<!-- ======== START OF CLASS DATA ======== -->
<H2>
<FONT SIZE="-1">
org.archive.util</FONT>
<BR>
Class CachedBdbMap&lt;K,V&gt;</H2>
<PRE>
java.lang.Object
  <IMG SRC="../../../resources/inherit.gif" ALT="extended by ">java.util.AbstractMap&lt;K,V&gt;
      <IMG SRC="../../../resources/inherit.gif" ALT="extended by "><B>org.archive.util.CachedBdbMap&lt;K,V&gt;</B>
</PRE>
<DL>
<DT><B>All Implemented Interfaces:</B> <DD>java.io.Closeable, java.io.Serializable, java.util.concurrent.ConcurrentMap&lt;K,V&gt;, java.util.Map&lt;K,V&gt;, <A HREF="../../../org/archive/util/ObjectIdentityCache.html" title="interface in org.archive.util">ObjectIdentityCache</A>&lt;K,V&gt;</DD>
</DL>
<HR>
<B>Deprecated.</B>&nbsp;<I>use ObjectIdentityBdbCache instead</I>
<P>
<DL>
<DT><PRE>public class <B>CachedBdbMap&lt;K,V&gt;</B><DT>extends java.util.AbstractMap&lt;K,V&gt;<DT>implements java.util.concurrent.ConcurrentMap&lt;K,V&gt;, <A HREF="../../../org/archive/util/ObjectIdentityCache.html" title="interface in org.archive.util">ObjectIdentityCache</A>&lt;K,V&gt;, java.io.Serializable, java.io.Closeable</DL>
</PRE>

<P>
A BDB JE backed hashmap. It extends the normal BDB JE map implementation by
 holding a cache of soft referenced objects. That is objects are not written
 to disk until they are not referenced by any other object and therefore can be
 Garbage Collected.
 <p/>
 BDB Java Edition is actually a btree.  Flush to disk can be forced by sync().
 <p/>
 To ensure that changes/mutations to values in this map are coherent and
 consistent at the application level, it is assumed that the application
 level only mutates values that are in this map and does not retain references
 to values longer than necessary.  This allows mappings to be persisted
 during GC without explicit transactions or write operations.
 <p/>
 There are two styles of CachedBdbMap usage:
 <p/>
 1. single threaded (or externally synchronized) activity that uses any 
 Map and ConcurrentMap methods available and specifically requires remove().
 <p/>
 2. concurrent, high volume, accretive-only activity that uses
 <A HREF="../../../org/archive/util/CachedBdbMap.html#putIfAbsent(K, V)"><CODE>putIfAbsent(K, V)</CODE></A>, but not the <A HREF="../../../org/archive/util/CachedBdbMap.html#put(K, V)"><CODE>put(K, V)</CODE></A>,  the <A HREF="../../../org/archive/util/CachedBdbMap.html#replace(K, V, V)"><CODE>replace(K, V, V)</CODE></A>
 or 1 arg <A HREF="../../../org/archive/util/CachedBdbMap.html#remove(java.lang.Object)"><CODE>remove(java.lang.Object)</CODE></A> methods.
 The concurrent <A HREF="../../../org/archive/util/CachedBdbMap.html#replace(K, V, V)"><CODE>replace(K, V, V)</CODE></A> methods can be used if application level logic
 can rule out surprise unmapping of values between threads.
 This usage style does not require locking memMap and diskMap together
 to guarantee cache coherence and consistency.
 <p/>
 Both styles rely on an internal expunge operation (or the explicit
 <A HREF="../../../org/archive/util/CachedBdbMap.html#sync()"><CODE>sync()</CODE></A>) to save changes to values.
 The single threaded case can also use <A HREF="../../../org/archive/util/CachedBdbMap.html#put(K, V)"><CODE>put(K, V)</CODE></A> on top of an
 existing entry as long as no thread retains the previous value instance.
<P>

<P>
<DL>
<DT><B>Author:</B></DT>
  <DD>John Erik Halse, stack, gojomo, paul baclace (conversion to ConcurrentMap)</DD>
<DT><B>See Also:</B><DD><A HREF="../../../serialized-form.html#org.archive.util.CachedBdbMap">Serialized Form</A></DL>
<HR>

<P>
<!-- ======== NESTED CLASS SUMMARY ======== -->

<A NAME="nested_class_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Nested Class Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected static&nbsp;class</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../org/archive/util/CachedBdbMap.DbEnvironmentEntry.html" title="class in org.archive.util">CachedBdbMap.DbEnvironmentEntry</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<B>Deprecated.</B>&nbsp;Simple structure to keep needed information about a DB Environment.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;class</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../org/archive/util/CachedBdbMap.LowMemoryCanary.html" title="class in org.archive.util">CachedBdbMap.LowMemoryCanary</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<B>Deprecated.</B>&nbsp;&nbsp;</TD>
</TR>
</TABLE>
&nbsp;<A NAME="nested_classes_inherited_from_class_java.util.AbstractMap"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#EEEEFF" CLASS="TableSubHeadingColor">
<TH ALIGN="left"><B>Nested classes/interfaces inherited from class java.util.AbstractMap</B></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE>java.util.AbstractMap.SimpleEntry&lt;K,V&gt;, java.util.AbstractMap.SimpleImmutableEntry&lt;K,V&gt;</CODE></TD>
</TR>
</TABLE>
&nbsp;
<A NAME="nested_classes_inherited_from_class_java.util.Map"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#EEEEFF" CLASS="TableSubHeadingColor">
<TH ALIGN="left"><B>Nested classes/interfaces inherited from interface java.util.Map</B></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE>java.util.Map.Entry&lt;K,V&gt;</CODE></TD>
</TR>
</TABLE>
&nbsp;
<!-- =========== FIELD SUMMARY =========== -->

<A NAME="field_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Field Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;java.lang.ref.SoftReference&lt;<A HREF="../../../org/archive/util/CachedBdbMap.LowMemoryCanary.html" title="class in org.archive.util">CachedBdbMap.LowMemoryCanary</A>&gt;</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../org/archive/util/CachedBdbMap.html#canary">canary</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<B>Deprecated.</B>&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;com.sleepycat.je.Database</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../org/archive/util/CachedBdbMap.html#db">db</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<B>Deprecated.</B>&nbsp;The BDB JE database used for this instance.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;com.sleepycat.collections.StoredSortedMap</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../org/archive/util/CachedBdbMap.html#diskMap">diskMap</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<B>Deprecated.</B>&nbsp;The Collection view of the BDB JE database used for this instance.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;java.util.concurrent.atomic.AtomicInteger</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../org/archive/util/CachedBdbMap.html#diskMapSize">diskMapSize</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<B>Deprecated.</B>&nbsp;The number of objects in the diskMap StoredMap.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;java.util.concurrent.ConcurrentHashMap&lt;<A HREF="../../../org/archive/util/CachedBdbMap.html" title="type parameter in CachedBdbMap">K</A>,org.archive.util.CachedBdbMap.SoftEntry&lt;<A HREF="../../../org/archive/util/CachedBdbMap.html" title="type parameter in CachedBdbMap">V</A>&gt;&gt;</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../org/archive/util/CachedBdbMap.html#memMap">memMap</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<B>Deprecated.</B>&nbsp;The softreferenced cache of diskMap.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected static&nbsp;java.lang.reflect.Field</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../org/archive/util/CachedBdbMap.html#referentField">referentField</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<B>Deprecated.</B>&nbsp;Reference to the Reference#referent Field.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;java.lang.ref.ReferenceQueue&lt;<A HREF="../../../org/archive/util/CachedBdbMap.html" title="type parameter in CachedBdbMap">V</A>&gt;</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../org/archive/util/CachedBdbMap.html#refQueue">refQueue</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<B>Deprecated.</B>&nbsp;&nbsp;</TD>
</TR>
</TABLE>
&nbsp;
<!-- ======== CONSTRUCTOR SUMMARY ======== -->

<A NAME="constructor_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Constructor Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE><B><A HREF="../../../org/archive/util/CachedBdbMap.html#CachedBdbMap(java.io.File, java.lang.String, java.lang.Class, java.lang.Class)">CachedBdbMap</A></B>(java.io.File&nbsp;dbDir,
             java.lang.String&nbsp;dbName,
             java.lang.Class&lt;<A HREF="../../../org/archive/util/CachedBdbMap.html" title="type parameter in CachedBdbMap">K</A>&gt;&nbsp;keyClass,
             java.lang.Class&lt;<A HREF="../../../org/archive/util/CachedBdbMap.html" title="type parameter in CachedBdbMap">V</A>&gt;&nbsp;valueClass)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<B>Deprecated.</B>&nbsp;A constructor for creating a new CachedBdbMap.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE><B><A HREF="../../../org/archive/util/CachedBdbMap.html#CachedBdbMap(java.lang.String)">CachedBdbMap</A></B>(java.lang.String&nbsp;dbName)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<B>Deprecated.</B>&nbsp;Constructor.</TD>
</TR>
</TABLE>
&nbsp;
<!-- ========== METHOD SUMMARY =========== -->

<A NAME="method_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Method Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../org/archive/util/CachedBdbMap.html#clear()">clear</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<B>Deprecated.</B>&nbsp;Note that a call to this method CLOSEs the underlying bdbje.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../org/archive/util/CachedBdbMap.html#close()">close</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<B>Deprecated.</B>&nbsp;close/release any associated resources</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;boolean</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../org/archive/util/CachedBdbMap.html#containsKey(java.lang.Object)">containsKey</A></B>(java.lang.Object&nbsp;key)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<B>Deprecated.</B>&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;boolean</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../org/archive/util/CachedBdbMap.html#containsValue(java.lang.Object)">containsValue</A></B>(java.lang.Object&nbsp;value)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<B>Deprecated.</B>&nbsp;<I></I>&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;com.sleepycat.collections.StoredSortedMap</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../org/archive/util/CachedBdbMap.html#createDiskMap(com.sleepycat.je.Database, com.sleepycat.bind.serial.StoredClassCatalog, java.lang.Class, java.lang.Class)">createDiskMap</A></B>(com.sleepycat.je.Database&nbsp;database,
              com.sleepycat.bind.serial.StoredClassCatalog&nbsp;classCatalog,
              java.lang.Class&nbsp;keyClass,
              java.lang.Class&nbsp;valueClass)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<B>Deprecated.</B>&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;java.util.Set&lt;java.util.Map.Entry&lt;<A HREF="../../../org/archive/util/CachedBdbMap.html" title="type parameter in CachedBdbMap">K</A>,<A HREF="../../../org/archive/util/CachedBdbMap.html" title="type parameter in CachedBdbMap">V</A>&gt;&gt;</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../org/archive/util/CachedBdbMap.html#entrySet()">entrySet</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<B>Deprecated.</B>&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../org/archive/util/CachedBdbMap.html#finalize()">finalize</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<B>Deprecated.</B>&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<A HREF="../../../org/archive/util/CachedBdbMap.html" title="type parameter in CachedBdbMap">V</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../org/archive/util/CachedBdbMap.html#get(java.lang.Object)">get</A></B>(java.lang.Object&nbsp;object)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<B>Deprecated.</B>&nbsp;get the object under the given key/name</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;java.lang.String</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../org/archive/util/CachedBdbMap.html#getDatabaseName()">getDatabaseName</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<B>Deprecated.</B>&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<A HREF="../../../org/archive/util/CachedBdbMap.html" title="type parameter in CachedBdbMap">V</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../org/archive/util/CachedBdbMap.html#getOrUse(K, org.archive.util.Supplier)">getOrUse</A></B>(<A HREF="../../../org/archive/util/CachedBdbMap.html" title="type parameter in CachedBdbMap">K</A>&nbsp;key,
         <A HREF="../../../org/archive/util/Supplier.html" title="class in org.archive.util">Supplier</A>&lt;<A HREF="../../../org/archive/util/CachedBdbMap.html" title="type parameter in CachedBdbMap">V</A>&gt;&nbsp;supplierOrNull)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<B>Deprecated.</B>&nbsp;ObjectIdentityCache get-or-atomic-create method.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../org/archive/util/CachedBdbMap.html#initialize(com.sleepycat.je.Environment, java.lang.Class, com.sleepycat.bind.serial.StoredClassCatalog)">initialize</A></B>(com.sleepycat.je.Environment&nbsp;env,
           java.lang.Class&lt;? super <A HREF="../../../org/archive/util/CachedBdbMap.html" title="type parameter in CachedBdbMap">V</A>&gt;&nbsp;valueClass,
           com.sleepycat.bind.serial.StoredClassCatalog&nbsp;classCatalog)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<B>Deprecated.</B>&nbsp;Call this method when you have an instance when you used the
 default constructor or when you have a deserialized instance that you
 want to reconnect with an extant bdbje environment.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../org/archive/util/CachedBdbMap.html#initializeInstance()">initializeInstance</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<B>Deprecated.</B>&nbsp;Do any instance setup.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../org/archive/util/CachedBdbMap.html#initTransientStats()">initTransientStats</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<B>Deprecated.</B>&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;java.util.Set&lt;<A HREF="../../../org/archive/util/CachedBdbMap.html" title="type parameter in CachedBdbMap">K</A>&gt;</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../org/archive/util/CachedBdbMap.html#keySet()">keySet</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<B>Deprecated.</B>&nbsp;The keySet of the diskMap is all relevant keys.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;com.sleepycat.je.Database</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../org/archive/util/CachedBdbMap.html#openDatabase(com.sleepycat.je.Environment, java.lang.String)">openDatabase</A></B>(com.sleepycat.je.Environment&nbsp;environment,
             java.lang.String&nbsp;dbName)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<B>Deprecated.</B>&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<A HREF="../../../org/archive/util/CachedBdbMap.html" title="type parameter in CachedBdbMap">V</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../org/archive/util/CachedBdbMap.html#put(K, V)">put</A></B>(<A HREF="../../../org/archive/util/CachedBdbMap.html" title="type parameter in CachedBdbMap">K</A>&nbsp;key,
    <A HREF="../../../org/archive/util/CachedBdbMap.html" title="type parameter in CachedBdbMap">V</A>&nbsp;value)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<B>Deprecated.</B>&nbsp;Map.put() implementation.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<A HREF="../../../org/archive/util/CachedBdbMap.html" title="type parameter in CachedBdbMap">V</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../org/archive/util/CachedBdbMap.html#putIfAbsent(K, V)">putIfAbsent</A></B>(<A HREF="../../../org/archive/util/CachedBdbMap.html" title="type parameter in CachedBdbMap">K</A>&nbsp;key,
            <A HREF="../../../org/archive/util/CachedBdbMap.html" title="type parameter in CachedBdbMap">V</A>&nbsp;value)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<B>Deprecated.</B>&nbsp;A composite putIfAbsent() over memMap and diskMap.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<A HREF="../../../org/archive/util/CachedBdbMap.html" title="type parameter in CachedBdbMap">V</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../org/archive/util/CachedBdbMap.html#remove(java.lang.Object)">remove</A></B>(java.lang.Object&nbsp;key)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<B>Deprecated.</B>&nbsp;Remove mapping for the given key.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;boolean</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../org/archive/util/CachedBdbMap.html#remove(java.lang.Object, java.lang.Object)">remove</A></B>(java.lang.Object&nbsp;key,
       java.lang.Object&nbsp;value)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<B>Deprecated.</B>&nbsp;remove item matching both the key and value.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<A HREF="../../../org/archive/util/CachedBdbMap.html" title="type parameter in CachedBdbMap">V</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../org/archive/util/CachedBdbMap.html#replace(K, V)">replace</A></B>(<A HREF="../../../org/archive/util/CachedBdbMap.html" title="type parameter in CachedBdbMap">K</A>&nbsp;key,
        <A HREF="../../../org/archive/util/CachedBdbMap.html" title="type parameter in CachedBdbMap">V</A>&nbsp;value)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<B>Deprecated.</B>&nbsp;Replace entry for key only if currently mapped to some value.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;boolean</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../org/archive/util/CachedBdbMap.html#replace(K, V, V)">replace</A></B>(<A HREF="../../../org/archive/util/CachedBdbMap.html" title="type parameter in CachedBdbMap">K</A>&nbsp;key,
        <A HREF="../../../org/archive/util/CachedBdbMap.html" title="type parameter in CachedBdbMap">V</A>&nbsp;oldValue,
        <A HREF="../../../org/archive/util/CachedBdbMap.html" title="type parameter in CachedBdbMap">V</A>&nbsp;newValue)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<B>Deprecated.</B>&nbsp;Replace entry for key only if currently mapped to given value.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;int</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../org/archive/util/CachedBdbMap.html#size()">size</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<B>Deprecated.</B>&nbsp;count of name-to-object contained</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../org/archive/util/CachedBdbMap.html#sync()">sync</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<B>Deprecated.</B>&nbsp;Sync in-memory map entries to backing disk store.</TD>
</TR>
</TABLE>
&nbsp;<A NAME="methods_inherited_from_class_java.util.AbstractMap"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#EEEEFF" CLASS="TableSubHeadingColor">
<TH ALIGN="left"><B>Methods inherited from class java.util.AbstractMap</B></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE>clone, equals, hashCode, isEmpty, putAll, toString, values</CODE></TD>
</TR>
</TABLE>
&nbsp;<A NAME="methods_inherited_from_class_java.lang.Object"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#EEEEFF" CLASS="TableSubHeadingColor">
<TH ALIGN="left"><B>Methods inherited from class java.lang.Object</B></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE>getClass, notify, notifyAll, wait, wait, wait</CODE></TD>
</TR>
</TABLE>
&nbsp;<A NAME="methods_inherited_from_class_java.util.Map"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#EEEEFF" CLASS="TableSubHeadingColor">
<TH ALIGN="left"><B>Methods inherited from interface java.util.Map</B></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE>equals, hashCode, isEmpty, putAll, values</CODE></TD>
</TR>
</TABLE>
&nbsp;
<P>

<!-- ============ FIELD DETAIL =========== -->

<A NAME="field_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="1"><FONT SIZE="+2">
<B>Field Detail</B></FONT></TH>
</TR>
</TABLE>

<A NAME="db"><!-- --></A><H3>
db</H3>
<PRE>
protected transient com.sleepycat.je.Database <B>db</B></PRE>
<DL>
<DD><B>Deprecated.</B>&nbsp;<DD>The BDB JE database used for this instance.
<P>
<DL>
</DL>
</DL>
<HR>

<A NAME="diskMap"><!-- --></A><H3>
diskMap</H3>
<PRE>
protected transient com.sleepycat.collections.StoredSortedMap <B>diskMap</B></PRE>
<DL>
<DD><B>Deprecated.</B>&nbsp;<DD>The Collection view of the BDB JE database used for this instance.
<P>
<DL>
</DL>
</DL>
<HR>

<A NAME="memMap"><!-- --></A><H3>
memMap</H3>
<PRE>
protected transient java.util.concurrent.ConcurrentHashMap&lt;<A HREF="../../../org/archive/util/CachedBdbMap.html" title="type parameter in CachedBdbMap">K</A>,org.archive.util.CachedBdbMap.SoftEntry&lt;<A HREF="../../../org/archive/util/CachedBdbMap.html" title="type parameter in CachedBdbMap">V</A>&gt;&gt; <B>memMap</B></PRE>
<DL>
<DD><B>Deprecated.</B>&nbsp;<DD>The softreferenced cache of diskMap.
 Policy is: a memMap value is always correct *if present*. 
 The diskMap value is only correct if there is no memMap value 
 (and any phantom memMap values have been persisted.)
   That is, if memMap has a value, then that value is the most 
 up to date.  If memMap does not hold a value, then diskMap has the 
 most up to date value.  
 <p/>
 For diskMap size monitoring and concurrency support, the following 
 invariant about keys is maintained: If a key is present in memMap,
 it must also present in diskMap (although the value in diskMap may
 not be the most recent, as above policy describes). 
 <p/>
 The key presence invariant and the value coherence policy are maintained 
 by using the "happens after" sense in the Java memory model by
 transitivity between diskMap and memMap.
 <p/>
 The clients of this class "only see one value instance" at a time so 
 that multiple, independent get(k) calls return the same object instance.
 <p/>
 Strategy Notes about using ConcurrentMap semantics to 
 implement the desired policy (see method comments for details):
 <p/>
 <pre>
 1. Swap in/First insert: diskMap, 
     then memMap // putIfAbsent() assures atomicity.
 2. Value mutation: only one value instance per key in memMap 
     is maintained so identity compare of value works and all clients 
     operate on the same object.
     This implies that methods which change the instance 
     (replace() methods) are not compatible with this design and
     should only be used if instance of CachedBdbMap is used 
     by a single thread.
     Because content of referent is mutated, mapping is not changed;
    2.1. BDB JE operation assumption: calling get(k) twice returns
     values that are equals(), but not necessarily == by identity
     ( diskMap.get(k).equals(diskMap.get(k)) is true, but 
      diskMap.get(k) != diskMap.get(k) (might be, but not guaranteed)).
 3. Swap out/flush: diskMap update, then memMap remove: 
     diskMap.put(k,v2); // exclusive only if performed when 
     processing ref queue during expunge;
     Avoid expunge races with a countdown latch in SoftEntry;
     memMap.remove(k,v2); if memMap race lost, then no harm done
     (notice that (k,v2) could match in either diskMap or memMap,
     or both, or neither).
    3.1. Only expunge does an update of an existing diskMap entry for 
      concurrent methods.
    3.2. CachedBdbMap.get() must be able to return referent or otherwise
      effect a swap-in if get() is invoked during a swap out of a
      particular key-value entry.
 4. sync() to disk: synchronized sync() // fully locked, no races.
 </pre>
 <p/>
 See the "find or create" style cache 
 <A HREF="../../../org/archive/crawler/datamodel/ServerCache.html#getServerFor(org.archive.crawler.datamodel.CandidateURI)"><CODE>ServerCache.getServerFor(CandidateURI)</CODE></A> for the major 
 high-concurrency client of this class in terms of number of objects 
 stored and performance impact.
<P>
<DL>
</DL>
</DL>
<HR>

<A NAME="refQueue"><!-- --></A><H3>
refQueue</H3>
<PRE>
protected transient java.lang.ref.ReferenceQueue&lt;<A HREF="../../../org/archive/util/CachedBdbMap.html" title="type parameter in CachedBdbMap">V</A>&gt; <B>refQueue</B></PRE>
<DL>
<DD><B>Deprecated.</B>&nbsp;<DL>
</DL>
</DL>
<HR>

<A NAME="diskMapSize"><!-- --></A><H3>
diskMapSize</H3>
<PRE>
protected java.util.concurrent.atomic.AtomicInteger <B>diskMapSize</B></PRE>
<DL>
<DD><B>Deprecated.</B>&nbsp;<DD>The number of objects in the diskMap StoredMap. 
  (Package access for unit testing.)
<P>
<DL>
</DL>
</DL>
<HR>

<A NAME="referentField"><!-- --></A><H3>
referentField</H3>
<PRE>
protected static java.lang.reflect.Field <B>referentField</B></PRE>
<DL>
<DD><B>Deprecated.</B>&nbsp;<DD>Reference to the Reference#referent Field.
<P>
<DL>
</DL>
</DL>
<HR>

<A NAME="canary"><!-- --></A><H3>
canary</H3>
<PRE>
protected transient java.lang.ref.SoftReference&lt;<A HREF="../../../org/archive/util/CachedBdbMap.LowMemoryCanary.html" title="class in org.archive.util">CachedBdbMap.LowMemoryCanary</A>&gt; <B>canary</B></PRE>
<DL>
<DD><B>Deprecated.</B>&nbsp;<DL>
</DL>
</DL>

<!-- ========= CONSTRUCTOR DETAIL ======== -->

<A NAME="constructor_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="1"><FONT SIZE="+2">
<B>Constructor Detail</B></FONT></TH>
</TR>
</TABLE>

<A NAME="CachedBdbMap(java.lang.String)"><!-- --></A><H3>
CachedBdbMap</H3>
<PRE>
public <B>CachedBdbMap</B>(java.lang.String&nbsp;dbName)</PRE>
<DL>
<DD><B>Deprecated.</B>&nbsp;<DD>Constructor.
 
 You must call
 <CODE>#initialize(Environment, Class, Class, StoredClassCatalog)</CODE>
 to finish construction. Construction is two-stepped to support
 reconnecting a deserialized CachedBdbMap with its backing bdbje
 database.
<P>
<DL>
<DT><B>Parameters:</B><DD><CODE>dbName</CODE> - Name of the backing db this instance should use.</DL>
</DL>
<HR>

<A NAME="CachedBdbMap(java.io.File, java.lang.String, java.lang.Class, java.lang.Class)"><!-- --></A><H3>
CachedBdbMap</H3>
<PRE>
public <B>CachedBdbMap</B>(java.io.File&nbsp;dbDir,
                    java.lang.String&nbsp;dbName,
                    java.lang.Class&lt;<A HREF="../../../org/archive/util/CachedBdbMap.html" title="type parameter in CachedBdbMap">K</A>&gt;&nbsp;keyClass,
                    java.lang.Class&lt;<A HREF="../../../org/archive/util/CachedBdbMap.html" title="type parameter in CachedBdbMap">V</A>&gt;&nbsp;valueClass)
             throws com.sleepycat.je.DatabaseException</PRE>
<DL>
<DD><B>Deprecated.</B>&nbsp;<DD>A constructor for creating a new CachedBdbMap.
 
 Even though the put and get methods conforms to the Collections interface
 taking any object as key or value, you have to submit the class of the
 allowed key and value objects here and will get an exception if you try
 to put anything else in the map.
 
 <p>This constructor internally calls
 <CODE>#initialize(Environment, Class, Class, StoredClassCatalog)</CODE>.
 Do not call initialize if you use this constructor.
<P>
<DL>
<DT><B>Parameters:</B><DD><CODE>dbDir</CODE> - The directory where the database will be created.<DD><CODE>dbName</CODE> - The name of the database to back this map by.<DD><CODE>keyClass</CODE> - The class of the objects allowed as keys.<DD><CODE>valueClass</CODE> - The class of the objects allowed as values.
<DT><B>Throws:</B>
<DD><CODE>com.sleepycat.je.DatabaseException</CODE> - is thrown if the underlying BDB JE database
             throws an exception.</DL>
</DL>

<!-- ============ METHOD DETAIL ========== -->

<A NAME="method_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="1"><FONT SIZE="+2">
<B>Method Detail</B></FONT></TH>
</TR>
</TABLE>

<A NAME="initialize(com.sleepycat.je.Environment, java.lang.Class, com.sleepycat.bind.serial.StoredClassCatalog)"><!-- --></A><H3>
initialize</H3>
<PRE>
public void <B>initialize</B>(com.sleepycat.je.Environment&nbsp;env,
                       java.lang.Class&lt;? super <A HREF="../../../org/archive/util/CachedBdbMap.html" title="type parameter in CachedBdbMap">V</A>&gt;&nbsp;valueClass,
                       com.sleepycat.bind.serial.StoredClassCatalog&nbsp;classCatalog)
                throws com.sleepycat.je.DatabaseException</PRE>
<DL>
<DD><B>Deprecated.</B>&nbsp;<DD>Call this method when you have an instance when you used the
 default constructor or when you have a deserialized instance that you
 want to reconnect with an extant bdbje environment.  Do not
 call this method if you used the
 <A HREF="../../../org/archive/util/CachedBdbMap.html#CachedBdbMap(java.io.File, java.lang.String, java.lang.Class, java.lang.Class)"><CODE>CachedBdbMap(File, String, Class, Class)</CODE></A> constructor.
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>env</CODE> - <DD><CODE>keyClass</CODE> - <DD><CODE>valueClass</CODE> - <DD><CODE>classCatalog</CODE> - 
<DT><B>Throws:</B>
<DD><CODE>com.sleepycat.je.DatabaseException</CODE></DL>
</DD>
</DL>
<HR>

<A NAME="initializeInstance()"><!-- --></A><H3>
initializeInstance</H3>
<PRE>
protected void <B>initializeInstance</B>()</PRE>
<DL>
<DD><B>Deprecated.</B>&nbsp;<DD>Do any instance setup.
 This method is used by constructors and when deserializing an instance.
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="initTransientStats()"><!-- --></A><H3>
initTransientStats</H3>
<PRE>
protected void <B>initTransientStats</B>()</PRE>
<DL>
<DD><B>Deprecated.</B>&nbsp;<DD><DL>
</DL>
</DD>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="createDiskMap(com.sleepycat.je.Database, com.sleepycat.bind.serial.StoredClassCatalog, java.lang.Class, java.lang.Class)"><!-- --></A><H3>
createDiskMap</H3>
<PRE>
protected com.sleepycat.collections.StoredSortedMap <B>createDiskMap</B>(com.sleepycat.je.Database&nbsp;database,
                                                                  com.sleepycat.bind.serial.StoredClassCatalog&nbsp;classCatalog,
                                                                  java.lang.Class&nbsp;keyClass,
                                                                  java.lang.Class&nbsp;valueClass)</PRE>
<DL>
<DD><B>Deprecated.</B>&nbsp;<DD><DL>
</DL>
</DD>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="openDatabase(com.sleepycat.je.Environment, java.lang.String)"><!-- --></A><H3>
openDatabase</H3>
<PRE>
protected com.sleepycat.je.Database <B>openDatabase</B>(com.sleepycat.je.Environment&nbsp;environment,
                                                 java.lang.String&nbsp;dbName)
                                          throws com.sleepycat.je.DatabaseException</PRE>
<DL>
<DD><B>Deprecated.</B>&nbsp;<DD><DL>
</DL>
</DD>
<DD><DL>

<DT><B>Throws:</B>
<DD><CODE>com.sleepycat.je.DatabaseException</CODE></DL>
</DD>
</DL>
<HR>

<A NAME="close()"><!-- --></A><H3>
close</H3>
<PRE>
public void <B>close</B>()</PRE>
<DL>
<DD><B>Deprecated.</B>&nbsp;<DD><B>Description copied from interface: <CODE><A HREF="../../../org/archive/util/ObjectIdentityCache.html#close()">ObjectIdentityCache</A></CODE></B></DD>
<DD>close/release any associated resources
<P>
<DD><DL>
<DT><B>Specified by:</B><DD><CODE>close</CODE> in interface <CODE>java.io.Closeable</CODE><DT><B>Specified by:</B><DD><CODE><A HREF="../../../org/archive/util/ObjectIdentityCache.html#close()">close</A></CODE> in interface <CODE><A HREF="../../../org/archive/util/ObjectIdentityCache.html" title="interface in org.archive.util">ObjectIdentityCache</A>&lt;<A HREF="../../../org/archive/util/CachedBdbMap.html" title="type parameter in CachedBdbMap">K</A>,<A HREF="../../../org/archive/util/CachedBdbMap.html" title="type parameter in CachedBdbMap">V</A>&gt;</CODE></DL>
</DD>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="finalize()"><!-- --></A><H3>
finalize</H3>
<PRE>
protected void <B>finalize</B>()
                 throws java.lang.Throwable</PRE>
<DL>
<DD><B>Deprecated.</B>&nbsp;<DD><DL>
<DT><B>Overrides:</B><DD><CODE>finalize</CODE> in class <CODE>java.lang.Object</CODE></DL>
</DD>
<DD><DL>

<DT><B>Throws:</B>
<DD><CODE>java.lang.Throwable</CODE></DL>
</DD>
</DL>
<HR>

<A NAME="keySet()"><!-- --></A><H3>
keySet</H3>
<PRE>
public java.util.Set&lt;<A HREF="../../../org/archive/util/CachedBdbMap.html" title="type parameter in CachedBdbMap">K</A>&gt; <B>keySet</B>()</PRE>
<DL>
<DD><B>Deprecated.</B>&nbsp;<DD>The keySet of the diskMap is all relevant keys.
<P>
<DD><DL>
<DT><B>Specified by:</B><DD><CODE>keySet</CODE> in interface <CODE>java.util.Map&lt;<A HREF="../../../org/archive/util/CachedBdbMap.html" title="type parameter in CachedBdbMap">K</A>,<A HREF="../../../org/archive/util/CachedBdbMap.html" title="type parameter in CachedBdbMap">V</A>&gt;</CODE><DT><B>Specified by:</B><DD><CODE><A HREF="../../../org/archive/util/ObjectIdentityCache.html#keySet()">keySet</A></CODE> in interface <CODE><A HREF="../../../org/archive/util/ObjectIdentityCache.html" title="interface in org.archive.util">ObjectIdentityCache</A>&lt;<A HREF="../../../org/archive/util/CachedBdbMap.html" title="type parameter in CachedBdbMap">K</A>,<A HREF="../../../org/archive/util/CachedBdbMap.html" title="type parameter in CachedBdbMap">V</A>&gt;</CODE><DT><B>Overrides:</B><DD><CODE>keySet</CODE> in class <CODE>java.util.AbstractMap&lt;<A HREF="../../../org/archive/util/CachedBdbMap.html" title="type parameter in CachedBdbMap">K</A>,<A HREF="../../../org/archive/util/CachedBdbMap.html" title="type parameter in CachedBdbMap">V</A>&gt;</CODE></DL>
</DD>
<DD><DL>
<DT><B>See Also:</B><DD><CODE>Map.keySet()</CODE></DL>
</DD>
</DL>
<HR>

<A NAME="entrySet()"><!-- --></A><H3>
entrySet</H3>
<PRE>
public java.util.Set&lt;java.util.Map.Entry&lt;<A HREF="../../../org/archive/util/CachedBdbMap.html" title="type parameter in CachedBdbMap">K</A>,<A HREF="../../../org/archive/util/CachedBdbMap.html" title="type parameter in CachedBdbMap">V</A>&gt;&gt; <B>entrySet</B>()</PRE>
<DL>
<DD><B>Deprecated.</B>&nbsp;<DD><DL>
<DT><B>Specified by:</B><DD><CODE>entrySet</CODE> in interface <CODE>java.util.Map&lt;<A HREF="../../../org/archive/util/CachedBdbMap.html" title="type parameter in CachedBdbMap">K</A>,<A HREF="../../../org/archive/util/CachedBdbMap.html" title="type parameter in CachedBdbMap">V</A>&gt;</CODE><DT><B>Specified by:</B><DD><CODE>entrySet</CODE> in class <CODE>java.util.AbstractMap&lt;<A HREF="../../../org/archive/util/CachedBdbMap.html" title="type parameter in CachedBdbMap">K</A>,<A HREF="../../../org/archive/util/CachedBdbMap.html" title="type parameter in CachedBdbMap">V</A>&gt;</CODE></DL>
</DD>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="getOrUse(java.lang.Object,org.archive.util.Supplier)"><!-- --></A><A NAME="getOrUse(K, org.archive.util.Supplier)"><!-- --></A><H3>
getOrUse</H3>
<PRE>
public <A HREF="../../../org/archive/util/CachedBdbMap.html" title="type parameter in CachedBdbMap">V</A> <B>getOrUse</B>(<A HREF="../../../org/archive/util/CachedBdbMap.html" title="type parameter in CachedBdbMap">K</A>&nbsp;key,
                  <A HREF="../../../org/archive/util/Supplier.html" title="class in org.archive.util">Supplier</A>&lt;<A HREF="../../../org/archive/util/CachedBdbMap.html" title="type parameter in CachedBdbMap">V</A>&gt;&nbsp;supplierOrNull)</PRE>
<DL>
<DD><B>Deprecated.</B>&nbsp;<DD>ObjectIdentityCache get-or-atomic-create method.
<P>
<DD><DL>
<DT><B>Specified by:</B><DD><CODE><A HREF="../../../org/archive/util/ObjectIdentityCache.html#getOrUse(K, org.archive.util.Supplier)">getOrUse</A></CODE> in interface <CODE><A HREF="../../../org/archive/util/ObjectIdentityCache.html" title="interface in org.archive.util">ObjectIdentityCache</A>&lt;<A HREF="../../../org/archive/util/CachedBdbMap.html" title="type parameter in CachedBdbMap">K</A>,<A HREF="../../../org/archive/util/CachedBdbMap.html" title="type parameter in CachedBdbMap">V</A>&gt;</CODE></DL>
</DD>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="get(java.lang.Object)"><!-- --></A><H3>
get</H3>
<PRE>
public <A HREF="../../../org/archive/util/CachedBdbMap.html" title="type parameter in CachedBdbMap">V</A> <B>get</B>(java.lang.Object&nbsp;object)</PRE>
<DL>
<DD><B>Deprecated.</B>&nbsp;<DD><B>Description copied from interface: <CODE><A HREF="../../../org/archive/util/ObjectIdentityCache.html#get(K)">ObjectIdentityCache</A></CODE></B></DD>
<DD>get the object under the given key/name
<P>
<DD><DL>
<DT><B>Specified by:</B><DD><CODE>get</CODE> in interface <CODE>java.util.Map&lt;<A HREF="../../../org/archive/util/CachedBdbMap.html" title="type parameter in CachedBdbMap">K</A>,<A HREF="../../../org/archive/util/CachedBdbMap.html" title="type parameter in CachedBdbMap">V</A>&gt;</CODE><DT><B>Specified by:</B><DD><CODE><A HREF="../../../org/archive/util/ObjectIdentityCache.html#get(K)">get</A></CODE> in interface <CODE><A HREF="../../../org/archive/util/ObjectIdentityCache.html" title="interface in org.archive.util">ObjectIdentityCache</A>&lt;<A HREF="../../../org/archive/util/CachedBdbMap.html" title="type parameter in CachedBdbMap">K</A>,<A HREF="../../../org/archive/util/CachedBdbMap.html" title="type parameter in CachedBdbMap">V</A>&gt;</CODE><DT><B>Overrides:</B><DD><CODE>get</CODE> in class <CODE>java.util.AbstractMap&lt;<A HREF="../../../org/archive/util/CachedBdbMap.html" title="type parameter in CachedBdbMap">K</A>,<A HREF="../../../org/archive/util/CachedBdbMap.html" title="type parameter in CachedBdbMap">V</A>&gt;</CODE></DL>
</DD>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="put(java.lang.Object,java.lang.Object)"><!-- --></A><A NAME="put(K, V)"><!-- --></A><H3>
put</H3>
<PRE>
public <A HREF="../../../org/archive/util/CachedBdbMap.html" title="type parameter in CachedBdbMap">V</A> <B>put</B>(<A HREF="../../../org/archive/util/CachedBdbMap.html" title="type parameter in CachedBdbMap">K</A>&nbsp;key,
             <A HREF="../../../org/archive/util/CachedBdbMap.html" title="type parameter in CachedBdbMap">V</A>&nbsp;value)</PRE>
<DL>
<DD><B>Deprecated.</B>&nbsp;<DD>Map.put() implementation. 
 <p/>
 Warning:  This method violates the "only expose one value instance" 
   design rule for this class.  Multiple instances means that it is
   undetermined as to which instance will be saved to disk last.
 This method can be safely used when only one thread has access to 
 this instance of CachedBdbMap.
 <p/>If possible, use <A HREF="../../../org/archive/util/CachedBdbMap.html#putIfAbsent(K, V)"><CODE>putIfAbsent(K, V)</CODE></A> instead.
 
 <pre>
 Preconditions: (diskMap.containsKey(), memMap.containsKey()) are:
 (*,*) put() cannot assure "only expose one value instance", so
     all cases are the same: put to diskMap then memMap; clear any 
     pre-existing SoftEntry to prevent expunge of old value.
 
 PostConditions:
 (T,T) both memMap and diskMap will have entries for given key; if 
     null is returned, then this is the first time the key has an
     entry, otherwise the previous value in diskMap will not be 
     updated until expunge. 
 </pre>
<P>
<DD><DL>
<DT><B>Specified by:</B><DD><CODE>put</CODE> in interface <CODE>java.util.Map&lt;<A HREF="../../../org/archive/util/CachedBdbMap.html" title="type parameter in CachedBdbMap">K</A>,<A HREF="../../../org/archive/util/CachedBdbMap.html" title="type parameter in CachedBdbMap">V</A>&gt;</CODE><DT><B>Overrides:</B><DD><CODE>put</CODE> in class <CODE>java.util.AbstractMap&lt;<A HREF="../../../org/archive/util/CachedBdbMap.html" title="type parameter in CachedBdbMap">K</A>,<A HREF="../../../org/archive/util/CachedBdbMap.html" title="type parameter in CachedBdbMap">V</A>&gt;</CODE></DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>key</CODE> - <DD><CODE>value</CODE> - 
<DT><B>Returns:</B><DD>previous value or null.</DL>
</DD>
</DL>
<HR>

<A NAME="replace(java.lang.Object,java.lang.Object,java.lang.Object)"><!-- --></A><A NAME="replace(K, V, V)"><!-- --></A><H3>
replace</H3>
<PRE>
public boolean <B>replace</B>(<A HREF="../../../org/archive/util/CachedBdbMap.html" title="type parameter in CachedBdbMap">K</A>&nbsp;key,
                       <A HREF="../../../org/archive/util/CachedBdbMap.html" title="type parameter in CachedBdbMap">V</A>&nbsp;oldValue,
                       <A HREF="../../../org/archive/util/CachedBdbMap.html" title="type parameter in CachedBdbMap">V</A>&nbsp;newValue)</PRE>
<DL>
<DD><B>Deprecated.</B>&nbsp;<DD>Replace entry for key only if currently mapped to given value.
 To maintain the illusion of an invisible cache,
 if the memMap has no mapping, the diskMap entry, if any, must
 be swapped-in to memMap in order to see if the given oldValue
 matches. 
 
 <p/>Possible disk io to swap in from diskMap.
 <p/>
 Warning:  This method violates the "only expose one value instance" 
   design rule for this class.  Multiple instances means that it is
   undetermined as to which instance will be saved to disk last.
 This method can be safely used when only one thread has access to 
 this instance of CachedBdbMap.
 <pre>
 Preconditions: (diskMap.containsKey(), memMap.containsKey()) are:
 (F,F) nothing to replace. 
    PostCondition: (F,F) no replace.
 (T,F) value must be swapped-in, do replace(), 
    PostCondition: (T,T) if
    replace occurred or not (value might have been replaced), diskMap
    need not be updated because expunge will do that.
 (*,T) normal swapped-in condition (we can assume that the method which
    put a mapping to memMap took care of creating one for diskMap), 
    memMap value is most recent and expunge can take care of 
    updating diskMap, so we only do replace() on memMap; 
    PostCondition: (*,T).
 </pre>
<P>
<DD><DL>
<DT><B>Specified by:</B><DD><CODE>replace</CODE> in interface <CODE>java.util.concurrent.ConcurrentMap&lt;<A HREF="../../../org/archive/util/CachedBdbMap.html" title="type parameter in CachedBdbMap">K</A>,<A HREF="../../../org/archive/util/CachedBdbMap.html" title="type parameter in CachedBdbMap">V</A>&gt;</CODE></DL>
</DD>
<DD><DL>

<DT><B>Returns:</B><DD>true if the replace was peformed (only if the previous mapping
   of key was to given oldValue).</DL>
</DD>
</DL>
<HR>

<A NAME="replace(java.lang.Object,java.lang.Object)"><!-- --></A><A NAME="replace(K, V)"><!-- --></A><H3>
replace</H3>
<PRE>
public <A HREF="../../../org/archive/util/CachedBdbMap.html" title="type parameter in CachedBdbMap">V</A> <B>replace</B>(<A HREF="../../../org/archive/util/CachedBdbMap.html" title="type parameter in CachedBdbMap">K</A>&nbsp;key,
                 <A HREF="../../../org/archive/util/CachedBdbMap.html" title="type parameter in CachedBdbMap">V</A>&nbsp;value)</PRE>
<DL>
<DD><B>Deprecated.</B>&nbsp;<DD>Replace entry for key only if currently mapped to some value.
 To maintain the illusion of an invisible cache,
 the diskMap value must be read to see if oldValue
 matches. The replace() operation is performed on memCache
 and then on diskCache, without synchronizing over the pair of
 operations.
 <p/>Possible disk io to swap in from diskMap.
 
 <p/>
 Warning:  This method violates the "only expose one value instance" 
   design rule for this class.  Multiple instances means that it is
   undetermined as to which instance will be saved to disk last.
 This method can be safely used when only one thread has access to 
 this instance of CachedBdbMap.
 <pre>
 Preconditions: (diskMap.containsKey(), memMap.containsKey()) are:
 (F,F) nothing to replace. PostCondition: (F,F) no change.
 (T,F) value must be swapped-in, do replace(), PostCondition: (T,T) if
    replace occurred or not (value might have been replaced), diskMap
    need not be updated because expunge will do that.
 (*,T) normal swapped-in condition (we can assume that the method which
    put a mapping to memMap took care of creating one for diskMap), 
    memMap value is most recent and expunge can take care of updating 
    diskMap, so we only do replace() on memMap.
 </pre>
<P>
<DD><DL>
<DT><B>Specified by:</B><DD><CODE>replace</CODE> in interface <CODE>java.util.concurrent.ConcurrentMap&lt;<A HREF="../../../org/archive/util/CachedBdbMap.html" title="type parameter in CachedBdbMap">K</A>,<A HREF="../../../org/archive/util/CachedBdbMap.html" title="type parameter in CachedBdbMap">V</A>&gt;</CODE></DL>
</DD>
<DD><DL>

<DT><B>Returns:</B><DD>previous value if the replace was peformed on either memMap
   or diskMap, the previous value in memMap is returned if non-null,
   otherwise the previous from diskMap is returned, if no match in 
   either map, then null is returned.</DL>
</DD>
</DL>
<HR>

<A NAME="putIfAbsent(java.lang.Object,java.lang.Object)"><!-- --></A><A NAME="putIfAbsent(K, V)"><!-- --></A><H3>
putIfAbsent</H3>
<PRE>
public <A HREF="../../../org/archive/util/CachedBdbMap.html" title="type parameter in CachedBdbMap">V</A> <B>putIfAbsent</B>(<A HREF="../../../org/archive/util/CachedBdbMap.html" title="type parameter in CachedBdbMap">K</A>&nbsp;key,
                     <A HREF="../../../org/archive/util/CachedBdbMap.html" title="type parameter in CachedBdbMap">V</A>&nbsp;value)</PRE>
<DL>
<DD><B>Deprecated.</B>&nbsp;<DD>A composite putIfAbsent() over memMap and diskMap.
 If the specified key is not already associated with any value, 
 associate it with the given value.
 By modifying memMap and diskMap.
 <p/>
 diskMap is not updated every time a value is mutated because this
 cached disk store attempts to be invisible to client code.  However,
 This method will cause diskMap to be updated if there was no previous
 because this was the case for v1.14.2 and earlier.  (It also means 
 diskMap and memMap, both ConcurrentMaps, can be coherently maintained
 from the perspective of a one-instance-only style cache with 
 diskMap updated at expunge by always modifying diskMap first here.
 The disk map size estimate is also reasonably correct if diskMap
 always has any mapping that is in memMap.)
 
 <p/> 
 Swap in/First insert: diskMap.putIfAbsent(), 
     then memMap.putIfAbsent(), putIfAbsent() assures atomicity;
 <pre>
 Preconditions: (diskMap.containsKey(), memMap.containsKey(SoftEntry)) are:
 (F,F) initial starting conditions: is absent, put to diskMap then memMap.
 (F,T) transient remove(): await other thread to finish with memMap, 
     then proceed as (F,F) 
       OR (if remove not used) an unexpected data race occurred.
 (T,F) reloadable from disk or in process of inserting first time:
     not absent.
 (T,T) normal swapped in condition: not absent.
 
 PostConditions:
 (T,T) both memMap and diskMap will have entries for given key (if 
     null is returned, then the value given is the one mapped).
 </pre>
<P>
<DD><DL>
<DT><B>Specified by:</B><DD><CODE>putIfAbsent</CODE> in interface <CODE>java.util.concurrent.ConcurrentMap&lt;<A HREF="../../../org/archive/util/CachedBdbMap.html" title="type parameter in CachedBdbMap">K</A>,<A HREF="../../../org/archive/util/CachedBdbMap.html" title="type parameter in CachedBdbMap">V</A>&gt;</CODE></DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>key</CODE> - <DD><CODE>value</CODE> - the value to which the given key should map, but only 
     if there is existing mapping for key.
<DT><B>Returns:</B><DD></DL>
</DD>
</DL>
<HR>

<A NAME="clear()"><!-- --></A><H3>
clear</H3>
<PRE>
public void <B>clear</B>()</PRE>
<DL>
<DD><B>Deprecated.</B>&nbsp;<DD>Note that a call to this method CLOSEs the underlying bdbje.
 This instance is no longer of any use.  It must be re-initialized.
 We close the db here because if this BigMap is being treated as a plain
 Map, this is only opportunity for cleanup.
<P>
<DD><DL>
<DT><B>Specified by:</B><DD><CODE>clear</CODE> in interface <CODE>java.util.Map&lt;<A HREF="../../../org/archive/util/CachedBdbMap.html" title="type parameter in CachedBdbMap">K</A>,<A HREF="../../../org/archive/util/CachedBdbMap.html" title="type parameter in CachedBdbMap">V</A>&gt;</CODE><DT><B>Overrides:</B><DD><CODE>clear</CODE> in class <CODE>java.util.AbstractMap&lt;<A HREF="../../../org/archive/util/CachedBdbMap.html" title="type parameter in CachedBdbMap">K</A>,<A HREF="../../../org/archive/util/CachedBdbMap.html" title="type parameter in CachedBdbMap">V</A>&gt;</CODE></DL>
</DD>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="remove(java.lang.Object)"><!-- --></A><H3>
remove</H3>
<PRE>
public <A HREF="../../../org/archive/util/CachedBdbMap.html" title="type parameter in CachedBdbMap">V</A> <B>remove</B>(java.lang.Object&nbsp;key)</PRE>
<DL>
<DD><B>Deprecated.</B>&nbsp;<DD>Remove mapping for the given key.
 A mapping does not need to be swapped in to be removed.
 Matching entry is removed from memMap and diskMap.
 <pre>
 Preconditions: (diskMap.containsKey(), memMap.containsKey(SoftEntry)) are:
 (F,*) nothing to remove if diskMap has no entry.
 (T,F) remove from diskMap, await expunge in memMap, if in progress.
 (T,T) remove from diskMap, clear phantom to prevent expunge of memMap.
 
 PostConditions:
 (F,F) both memMap and diskMap will NOT have entries for given key (if 
     null is returned, then nothing was removed).
 </pre>
<P>
<DD><DL>
<DT><B>Specified by:</B><DD><CODE>remove</CODE> in interface <CODE>java.util.Map&lt;<A HREF="../../../org/archive/util/CachedBdbMap.html" title="type parameter in CachedBdbMap">K</A>,<A HREF="../../../org/archive/util/CachedBdbMap.html" title="type parameter in CachedBdbMap">V</A>&gt;</CODE><DT><B>Overrides:</B><DD><CODE>remove</CODE> in class <CODE>java.util.AbstractMap&lt;<A HREF="../../../org/archive/util/CachedBdbMap.html" title="type parameter in CachedBdbMap">K</A>,<A HREF="../../../org/archive/util/CachedBdbMap.html" title="type parameter in CachedBdbMap">V</A>&gt;</CODE></DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>key</CODE> - 
<DT><B>Returns:</B><DD>old value or null if nothing removed.</DL>
</DD>
</DL>
<HR>

<A NAME="remove(java.lang.Object, java.lang.Object)"><!-- --></A><H3>
remove</H3>
<PRE>
public boolean <B>remove</B>(java.lang.Object&nbsp;key,
                      java.lang.Object&nbsp;value)</PRE>
<DL>
<DD><B>Deprecated.</B>&nbsp;<DD>remove item matching both the key and value.  
 Matching entry is removed from memMap and diskMap.
 A mapping does not need to be swapped in to be removed.
 If the entry matching key is swapped in, then value is used 
 to find and remove the entry in memMap (the value is of type V), 
 and diskMap.remove(K) is used to remove the persistent entry.
 
 Otherwise, a diskMap.remove(K,V) is performed.
 <pre>
 Preconditions: (diskMap.containsKey() AND value.equals(V), 
        memMap.containsKey(SoftEntry) AND value.equals(V) AND
        swapped-in) are:
 (F,F) nothing to do.
 (F,T) diskMap.remove(K,V) fails, but memMap.remove(K,V) still possible
 (T,F) remove from diskMap, await expunge in memMap, if in progress.
 (T,T) remove from diskMap, clear phantom to prevent expunge of memMap.
 
 PostConditions:
 (F,F) both memMap and diskMap will NOT have entries for given key (if 
     false is returned, then nothing was removed).
 </pre>
<P>
<DD><DL>
<DT><B>Specified by:</B><DD><CODE>remove</CODE> in interface <CODE>java.util.concurrent.ConcurrentMap&lt;<A HREF="../../../org/archive/util/CachedBdbMap.html" title="type parameter in CachedBdbMap">K</A>,<A HREF="../../../org/archive/util/CachedBdbMap.html" title="type parameter in CachedBdbMap">V</A>&gt;</CODE></DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>key</CODE> - key used for matching mapping to remove.<DD><CODE>value</CODE> - value used for matching mapping to remove.
<DT><B>Returns:</B><DD>true if entry removed.</DL>
</DD>
</DL>
<HR>

<A NAME="containsKey(java.lang.Object)"><!-- --></A><H3>
containsKey</H3>
<PRE>
public boolean <B>containsKey</B>(java.lang.Object&nbsp;key)</PRE>
<DL>
<DD><B>Deprecated.</B>&nbsp;<DD><DL>
<DT><B>Specified by:</B><DD><CODE>containsKey</CODE> in interface <CODE>java.util.Map&lt;<A HREF="../../../org/archive/util/CachedBdbMap.html" title="type parameter in CachedBdbMap">K</A>,<A HREF="../../../org/archive/util/CachedBdbMap.html" title="type parameter in CachedBdbMap">V</A>&gt;</CODE><DT><B>Overrides:</B><DD><CODE>containsKey</CODE> in class <CODE>java.util.AbstractMap&lt;<A HREF="../../../org/archive/util/CachedBdbMap.html" title="type parameter in CachedBdbMap">K</A>,<A HREF="../../../org/archive/util/CachedBdbMap.html" title="type parameter in CachedBdbMap">V</A>&gt;</CODE></DL>
</DD>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="containsValue(java.lang.Object)"><!-- --></A><H3>
containsValue</H3>
<PRE>
public boolean <B>containsValue</B>(java.lang.Object&nbsp;value)</PRE>
<DL>
<DD><B>Deprecated.</B>&nbsp;<I></I>
<P>
<DD>This method is not supported.
<P>
<DD><DL>
<DT><B>Specified by:</B><DD><CODE>containsValue</CODE> in interface <CODE>java.util.Map&lt;<A HREF="../../../org/archive/util/CachedBdbMap.html" title="type parameter in CachedBdbMap">K</A>,<A HREF="../../../org/archive/util/CachedBdbMap.html" title="type parameter in CachedBdbMap">V</A>&gt;</CODE><DT><B>Overrides:</B><DD><CODE>containsValue</CODE> in class <CODE>java.util.AbstractMap&lt;<A HREF="../../../org/archive/util/CachedBdbMap.html" title="type parameter in CachedBdbMap">K</A>,<A HREF="../../../org/archive/util/CachedBdbMap.html" title="type parameter in CachedBdbMap">V</A>&gt;</CODE></DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>value</CODE> - 
<DT><B>Returns:</B><DD></DL>
</DD>
</DL>
<HR>

<A NAME="size()"><!-- --></A><H3>
size</H3>
<PRE>
public int <B>size</B>()</PRE>
<DL>
<DD><B>Deprecated.</B>&nbsp;<DD><B>Description copied from interface: <CODE><A HREF="../../../org/archive/util/ObjectIdentityCache.html#size()">ObjectIdentityCache</A></CODE></B></DD>
<DD>count of name-to-object contained
<P>
<DD><DL>
<DT><B>Specified by:</B><DD><CODE>size</CODE> in interface <CODE>java.util.Map&lt;<A HREF="../../../org/archive/util/CachedBdbMap.html" title="type parameter in CachedBdbMap">K</A>,<A HREF="../../../org/archive/util/CachedBdbMap.html" title="type parameter in CachedBdbMap">V</A>&gt;</CODE><DT><B>Specified by:</B><DD><CODE><A HREF="../../../org/archive/util/ObjectIdentityCache.html#size()">size</A></CODE> in interface <CODE><A HREF="../../../org/archive/util/ObjectIdentityCache.html" title="interface in org.archive.util">ObjectIdentityCache</A>&lt;<A HREF="../../../org/archive/util/CachedBdbMap.html" title="type parameter in CachedBdbMap">K</A>,<A HREF="../../../org/archive/util/CachedBdbMap.html" title="type parameter in CachedBdbMap">V</A>&gt;</CODE><DT><B>Overrides:</B><DD><CODE>size</CODE> in class <CODE>java.util.AbstractMap&lt;<A HREF="../../../org/archive/util/CachedBdbMap.html" title="type parameter in CachedBdbMap">K</A>,<A HREF="../../../org/archive/util/CachedBdbMap.html" title="type parameter in CachedBdbMap">V</A>&gt;</CODE></DL>
</DD>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="getDatabaseName()"><!-- --></A><H3>
getDatabaseName</H3>
<PRE>
protected java.lang.String <B>getDatabaseName</B>()</PRE>
<DL>
<DD><B>Deprecated.</B>&nbsp;<DD><DL>
</DL>
</DD>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="sync()"><!-- --></A><H3>
sync</H3>
<PRE>
public void <B>sync</B>()</PRE>
<DL>
<DD><B>Deprecated.</B>&nbsp;<DD>Sync in-memory map entries to backing disk store.
 When done, the memory map will be cleared and all entries stored
 on disk.
<P>
<DD><DL>
<DT><B>Specified by:</B><DD><CODE><A HREF="../../../org/archive/util/ObjectIdentityCache.html#sync()">sync</A></CODE> in interface <CODE><A HREF="../../../org/archive/util/ObjectIdentityCache.html" title="interface in org.archive.util">ObjectIdentityCache</A>&lt;<A HREF="../../../org/archive/util/CachedBdbMap.html" title="type parameter in CachedBdbMap">K</A>,<A HREF="../../../org/archive/util/CachedBdbMap.html" title="type parameter in CachedBdbMap">V</A>&gt;</CODE></DL>
</DD>
<DD><DL>
</DL>
</DD>
</DL>
<!-- ========= END OF CLASS DATA ========= -->
<HR>


<!-- ======= START OF BOTTOM NAVBAR ====== -->
<A NAME="navbar_bottom"><!-- --></A>
<A HREF="#skip-navbar_bottom" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_bottom_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="class-use/CachedBdbMap.html"><FONT CLASS="NavBarFont1"><B>Use</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../index-all.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;<A HREF="../../../org/archive/util/BloomFilter64bit.html" title="class in org.archive.util"><B>PREV CLASS</B></A>&nbsp;
&nbsp;<A HREF="../../../org/archive/util/CachedBdbMap.DbEnvironmentEntry.html" title="class in org.archive.util"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../index.html?org/archive/util/CachedBdbMap.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="CachedBdbMap.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>


</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY:&nbsp;<A HREF="#nested_class_summary">NESTED</A>&nbsp;|&nbsp;<A HREF="#field_summary">FIELD</A>&nbsp;|&nbsp;<A HREF="#constructor_summary">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;<A HREF="#field_detail">FIELD</A>&nbsp;|&nbsp;<A HREF="#constructor_detail">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_bottom"></A>
<!-- ======== END OF BOTTOM NAVBAR ======= -->

<HR>
Copyright &copy; 2003-2010 Internet Archive. All Rights Reserved.
</BODY>
</HTML>
